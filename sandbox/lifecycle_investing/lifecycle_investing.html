<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Konilo Zio">
<meta name="dcterms.date" content="2026-02-07">

<title>Lifecycle Investing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="lifecycle_investing_files/libs/clipboard/clipboard.min.js"></script>
<script src="lifecycle_investing_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="lifecycle_investing_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="lifecycle_investing_files/libs/quarto-html/popper.min.js"></script>
<script src="lifecycle_investing_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lifecycle_investing_files/libs/quarto-html/anchor.min.js"></script>
<link href="lifecycle_investing_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lifecycle_investing_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lifecycle_investing_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lifecycle_investing_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lifecycle_investing_files/libs/bootstrap/bootstrap-fa79327b847c551aa1f1b9d9e8a8eb6a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="lifecycle_investing_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="lifecycle_investing_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="lifecycle_investing_files/libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="lifecycle_investing_files/libs/typedarray-0.1/typedarray.min.js"></script>
<script src="lifecycle_investing_files/libs/jquery-3.5.1/jquery.min.js"></script>
<link href="lifecycle_investing_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="lifecycle_investing_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="lifecycle_investing_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="lifecycle_investing_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#considering-the-present-value-of-the-future-savings" id="toc-considering-the-present-value-of-the-future-savings" class="nav-link" data-scroll-target="#considering-the-present-value-of-the-future-savings"><span class="header-section-number">2</span> Considering the present value of the future savings</a></li>
  <li><a href="#sec-temp-div" id="toc-sec-temp-div" class="nav-link" data-scroll-target="#sec-temp-div"><span class="header-section-number">3</span> Temporal diversification</a></li>
  <li><a href="#sec-lev" id="toc-sec-lev" class="nav-link" data-scroll-target="#sec-lev"><span class="header-section-number">4</span> Leverage</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix"><span class="header-section-number">5</span> Appendix</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Lifecycle Investing</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Konilo Zio </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 7, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Lifecycle investing is a saving and investing model originally developed by Ayres &amp; Nalebuff (<a href="https://www.amazon.com/gp/product/0465018297">2010</a>) which excels in the realm of retirement planning. This document dives into a few striking aspects of this approach in the context of retirement planning.</p>
<p>For a proper introduction to lifecycle investing:</p>
<ul>
<li>refer to the book by Ayres &amp; Nalebuff,</li>
<li>read the <a href="https://tpawplanner.com/learn">documentation of the TPAW Planner</a> by Ben Mathew,</li>
<li>or listen to him on <a href="https://open.spotify.com/episode/4QKJlnDQQxCm0JoxYg4hLI">The Rational Reminder Podcast Episode 340</a>.</li>
</ul>
</section>
<section id="considering-the-present-value-of-the-future-savings" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Considering the present value of the future savings</h1>
<p>In lifecycle investing, the capital to consider and manage at each point in time – the <em>total portfolio</em> (<span class="math inline">\(TP\)</span>) – is the sum of the current savings – the <em>savings portfolio</em> (<span class="math inline">\(SP\)</span>) – and of the present of value of the future savings (<span class="math inline">\(CVFS\)</span>) (<a href="#eq-tp" class="quarto-xref">Equation&nbsp;1</a>). Let’s explain.</p>
<p><span id="eq-tp"><span class="math display">\[
TP = SP + CVFS
\tag{1}\]</span></span></p>
<ul>
<li>Based on one’s level of risk aversion, a certain share of their investment portfolio should be allocated to risky assets (stocks, typically) and the rest to relatively less risky assets (bonds, typically) – this is the Merton-Samuelson share.</li>
<li>One simplistic way to apply this share is to apply it to the savings portfolio i.e., the capital one currently possesses in the bank (or in the form of real estate, etc.).</li>
<li>The issue with this method is that it ignores the capital that has not yet materialized but is likely to in the future: that is savings from future salaries, typically. On one hand, it might feel risky to bet on these future savings – who knows what the future holds – but, on the other hand, it is generally overly conservative to assume that no future savings will ever be made. So, it makes sense to make a cautious but considerable assumption for planning sakes.</li>
<li>Since we are relatively confident that those future savings will actually be made, they can be added to the savings portfolio like if they were bonds (low return and low risk).</li>
</ul>
<p>Now, how to compute their <em>current</em> value? Considering those savings like bonds implies that their value grows up until they reach maturity and migrate as savings in the savings portfolio. That means that their current value depends on the yield of bonds and on the time between now and the materialization of the saving. If we consider that 10 k€ will be saved from one’s salary 10 years from now and using a yearly yield of 1%, then the current value of those savings is <span class="math inline">\(10000 / (1 + 0.01)^{10}=9052.87\)</span>. This is like rewinding 10 years of yield. The yield manipulated this way is also called a <em>discount rate</em>: we apply it in reverse to discount the final value and obtain the current value. <a href="#eq-cvfs-i" class="quarto-xref">Equation&nbsp;2</a> provides the formula with <span class="math inline">\(CVFS_i\)</span> being the current value of the future saving <em>i</em>, <span class="math inline">\(FS_i\)</span> being the future saving <em>i</em> in question, <span class="math inline">\(DR\)</span> being the discount rate, and <span class="math inline">\(NY\)</span> corresponding to the number of years between now and the materialization of saving <em>i</em>.</p>
<p><span id="eq-cvfs-i"><span class="math display">\[
CVFS_i = \frac{FS_i}{(1 + DR)^{NY}}
\tag{2}\]</span></span></p>
<p>To generalize this to all future savings (future savings <em>1</em> to <em>n</em>), we just make a sum and use the number of years that corresponds to each (<span class="math inline">\(NY_i\)</span>): <span id="eq-cvfs"><span class="math display">\[
CVFS = \sum_{i=1}^{n}\frac{FS_i}{(1 + DR)^{NY_i}}
\tag{3}\]</span></span></p>
<p>Let’s take a simple scenario and illustrate the evolution of the total portfolio. We’ll consider a person that saves a constant 1 k€ per month and a discount rate of 1%, and visualize their total portfolio from age 23 to 65 i.e., during their working life, excluding capital gains in the savings portfolio (0% yield). We can see that future savings go from representing 0% to 100% of the total portfolio as they gradually materialize and get turned into actual savings (<a href="#fig-total-over-life" class="quarto-xref">Figure&nbsp;1</a>).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>compute_cvfs <span class="ot">&lt;-</span> <span class="cf">function</span>(month_idx, last_month_idx, monthly_savings, discount_rate) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (month_idx <span class="sc">==</span> last_month_idx) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    month_idx_cvfs <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (future_month_idx <span class="cf">in</span> (month_idx <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span>last_month_idx) {</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        month_idx_cvfs <span class="ot">&lt;-</span> month_idx_cvfs <span class="sc">+</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>            monthly_savings <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> discount_rate)<span class="sc">^</span>((last_month_idx <span class="sc">-</span> future_month_idx) <span class="sc">/</span> <span class="dv">12</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(month_idx_cvfs)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>project_no_return_pf <span class="ot">&lt;-</span> <span class="cf">function</span>(age_start, age_stop, monthly_savings, discount_rate) {</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    last_month_idx <span class="ot">&lt;-</span> (age_stop <span class="sc">-</span> age_start) <span class="sc">*</span> <span class="dv">12</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.table</span>(</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">month_idx =</span> <span class="dv">1</span><span class="sc">:</span>last_month_idx</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    )[</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        ,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">`</span><span class="at">:=</span><span class="st">`</span>(</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">age =</span> age_start <span class="sc">+</span> month_idx <span class="sc">/</span> <span class="dv">12</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">sp =</span> monthly_savings <span class="sc">*</span> month_idx,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">cvfs =</span> <span class="fu">sapply</span>(</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>                month_idx,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>                <span class="cf">function</span>(idx) <span class="fu">compute_cvfs</span>(idx, last_month_idx, monthly_savings, discount_rate)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    ][</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        ,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>        tp <span class="sc">:</span><span class="er">=</span> sp <span class="sc">+</span> cvfs</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">project_no_return_pf</span>(<span class="dv">23</span>, <span class="dv">65</span>, <span class="dv">1000</span>, <span class="fl">0.01</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Update colors for SP and TP/CVFS in plots</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> dt, <span class="at">x =</span> <span class="sc">~</span>age, <span class="at">y =</span> <span class="sc">~</span>sp, <span class="at">type =</span> <span class="st">"bar"</span>, <span class="at">name =</span> <span class="st">"Savings Portfolio"</span>, <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#1f77b4"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span>cvfs, <span class="at">name =</span> <span class="st">"Current Value of Future Savings"</span>, <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#ff7f0e"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layout</span>(</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">barmode =</span> <span class="st">"stack"</span>,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">""</span>,</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Age"</span>),</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Portfolio Value"</span>),</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend =</span> <span class="fu">list</span>(<span class="at">orientation =</span> <span class="st">"h"</span>, <span class="at">x =</span> <span class="fl">0.5</span>, <span class="at">xanchor =</span> <span class="st">"center"</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>),</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">hovermode =</span> <span class="st">"x"</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-total-over-life" class="cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-total-over-life-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="plotly html-widget html-fill-item" id="htmlwidget-676c5345679dff7717e5" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-676c5345679dff7717e5">{"x":{"visdat":{"1438017cdf559":["function () ","plotlyVisDat"]},"cur_data":"1438017cdf559","attrs":{"1438017cdf559":{"x":{},"y":{},"marker":{"color":"#1f77b4"},"name":"Savings Portfolio","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"1438017cdf559.1":{"x":{},"y":{},"marker":{"color":"#ff7f0e"},"name":"Current Value of Future Savings","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"barmode":"stack","title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"Age"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Portfolio Value"},"legend":{"orientation":"h","x":0.5,"xanchor":"center","y":-0.20000000000000001},"hovermode":"x","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[23.083333333333332,23.166666666666668,23.25,23.333333333333332,23.416666666666668,23.5,23.583333333333332,23.666666666666668,23.75,23.833333333333332,23.916666666666668,24,24.083333333333332,24.166666666666668,24.25,24.333333333333332,24.416666666666668,24.5,24.583333333333332,24.666666666666668,24.75,24.833333333333332,24.916666666666668,25,25.083333333333332,25.166666666666668,25.25,25.333333333333332,25.416666666666668,25.5,25.583333333333332,25.666666666666668,25.75,25.833333333333332,25.916666666666668,26,26.083333333333332,26.166666666666668,26.25,26.333333333333332,26.416666666666668,26.5,26.583333333333332,26.666666666666668,26.75,26.833333333333332,26.916666666666668,27,27.083333333333332,27.166666666666668,27.25,27.333333333333332,27.416666666666668,27.5,27.583333333333332,27.666666666666668,27.75,27.833333333333332,27.916666666666668,28,28.083333333333332,28.166666666666668,28.25,28.333333333333332,28.416666666666668,28.5,28.583333333333332,28.666666666666668,28.75,28.833333333333332,28.916666666666668,29,29.083333333333332,29.166666666666668,29.25,29.333333333333332,29.416666666666668,29.5,29.583333333333332,29.666666666666668,29.75,29.833333333333332,29.916666666666668,30,30.083333333333332,30.166666666666668,30.25,30.333333333333332,30.416666666666668,30.5,30.583333333333332,30.666666666666668,30.75,30.833333333333332,30.916666666666668,31,31.083333333333336,31.166666666666664,31.25,31.333333333333336,31.416666666666664,31.5,31.583333333333336,31.666666666666664,31.75,31.833333333333336,31.916666666666664,32,32.083333333333336,32.166666666666664,32.25,32.333333333333336,32.416666666666664,32.5,32.583333333333336,32.666666666666664,32.75,32.833333333333336,32.916666666666664,33,33.083333333333336,33.166666666666664,33.25,33.333333333333336,33.416666666666664,33.5,33.583333333333336,33.666666666666664,33.75,33.833333333333336,33.916666666666664,34,34.083333333333336,34.166666666666664,34.25,34.333333333333336,34.416666666666664,34.5,34.583333333333336,34.666666666666664,34.75,34.833333333333336,34.916666666666664,35,35.083333333333336,35.166666666666664,35.25,35.333333333333336,35.416666666666664,35.5,35.583333333333336,35.666666666666664,35.75,35.833333333333336,35.916666666666664,36,36.083333333333336,36.166666666666664,36.25,36.333333333333336,36.416666666666664,36.5,36.583333333333336,36.666666666666664,36.75,36.833333333333336,36.916666666666664,37,37.083333333333336,37.166666666666664,37.25,37.333333333333336,37.416666666666664,37.5,37.583333333333336,37.666666666666664,37.75,37.833333333333336,37.916666666666664,38,38.083333333333336,38.166666666666664,38.25,38.333333333333336,38.416666666666664,38.5,38.583333333333336,38.666666666666664,38.75,38.833333333333336,38.916666666666664,39,39.083333333333329,39.166666666666671,39.25,39.333333333333329,39.416666666666671,39.5,39.583333333333329,39.666666666666671,39.75,39.833333333333329,39.916666666666671,40,40.083333333333329,40.166666666666671,40.25,40.333333333333329,40.416666666666671,40.5,40.583333333333329,40.666666666666671,40.75,40.833333333333329,40.916666666666671,41,41.083333333333329,41.166666666666671,41.25,41.333333333333329,41.416666666666671,41.5,41.583333333333329,41.666666666666671,41.75,41.833333333333329,41.916666666666671,42,42.083333333333329,42.166666666666671,42.25,42.333333333333329,42.416666666666671,42.5,42.583333333333329,42.666666666666671,42.75,42.833333333333329,42.916666666666671,43,43.083333333333329,43.166666666666671,43.25,43.333333333333329,43.416666666666671,43.5,43.583333333333329,43.666666666666671,43.75,43.833333333333329,43.916666666666671,44,44.083333333333329,44.166666666666671,44.25,44.333333333333329,44.416666666666671,44.5,44.583333333333329,44.666666666666671,44.75,44.833333333333329,44.916666666666671,45,45.083333333333329,45.166666666666671,45.25,45.333333333333329,45.416666666666671,45.5,45.583333333333329,45.666666666666671,45.75,45.833333333333329,45.916666666666671,46,46.083333333333329,46.166666666666671,46.25,46.333333333333329,46.416666666666671,46.5,46.583333333333329,46.666666666666671,46.75,46.833333333333329,46.916666666666671,47,47.083333333333329,47.166666666666671,47.25,47.333333333333329,47.416666666666671,47.5,47.583333333333329,47.666666666666671,47.75,47.833333333333329,47.916666666666671,48,48.083333333333329,48.166666666666671,48.25,48.333333333333329,48.416666666666671,48.5,48.583333333333329,48.666666666666671,48.75,48.833333333333329,48.916666666666671,49,49.083333333333329,49.166666666666671,49.25,49.333333333333329,49.416666666666671,49.5,49.583333333333329,49.666666666666671,49.75,49.833333333333329,49.916666666666671,50,50.083333333333329,50.166666666666671,50.25,50.333333333333329,50.416666666666671,50.5,50.583333333333329,50.666666666666671,50.75,50.833333333333329,50.916666666666671,51,51.083333333333329,51.166666666666671,51.25,51.333333333333329,51.416666666666671,51.5,51.583333333333329,51.666666666666671,51.75,51.833333333333329,51.916666666666671,52,52.083333333333329,52.166666666666671,52.25,52.333333333333329,52.416666666666671,52.5,52.583333333333329,52.666666666666671,52.75,52.833333333333329,52.916666666666671,53,53.083333333333329,53.166666666666671,53.25,53.333333333333329,53.416666666666671,53.5,53.583333333333329,53.666666666666671,53.75,53.833333333333329,53.916666666666671,54,54.083333333333329,54.166666666666671,54.25,54.333333333333329,54.416666666666671,54.5,54.583333333333329,54.666666666666671,54.75,54.833333333333329,54.916666666666671,55,55.083333333333336,55.166666666666664,55.25,55.333333333333336,55.416666666666664,55.5,55.583333333333336,55.666666666666664,55.75,55.833333333333336,55.916666666666664,56,56.083333333333336,56.166666666666664,56.25,56.333333333333336,56.416666666666664,56.5,56.583333333333336,56.666666666666664,56.75,56.833333333333336,56.916666666666664,57,57.083333333333336,57.166666666666664,57.25,57.333333333333336,57.416666666666664,57.5,57.583333333333336,57.666666666666664,57.75,57.833333333333336,57.916666666666664,58,58.083333333333336,58.166666666666664,58.25,58.333333333333336,58.416666666666664,58.5,58.583333333333336,58.666666666666664,58.75,58.833333333333336,58.916666666666664,59,59.083333333333336,59.166666666666664,59.25,59.333333333333336,59.416666666666664,59.5,59.583333333333336,59.666666666666664,59.75,59.833333333333336,59.916666666666664,60,60.083333333333336,60.166666666666664,60.25,60.333333333333336,60.416666666666664,60.5,60.583333333333336,60.666666666666664,60.75,60.833333333333336,60.916666666666664,61,61.083333333333336,61.166666666666664,61.25,61.333333333333336,61.416666666666664,61.5,61.583333333333336,61.666666666666664,61.75,61.833333333333336,61.916666666666664,62,62.083333333333336,62.166666666666664,62.25,62.333333333333336,62.416666666666664,62.5,62.583333333333336,62.666666666666664,62.75,62.833333333333336,62.916666666666664,63,63.083333333333336,63.166666666666664,63.25,63.333333333333336,63.416666666666664,63.5,63.583333333333336,63.666666666666664,63.75,63.833333333333336,63.916666666666664,64,64.083333333333343,64.166666666666657,64.25,64.333333333333343,64.416666666666657,64.5,64.583333333333343,64.666666666666657,64.75,64.833333333333343,64.916666666666657,65],"y":[1000,2000,3000,4000,5000,6000,7000,8000,9000,10000,11000,12000,13000,14000,15000,16000,17000,18000,19000,20000,21000,22000,23000,24000,25000,26000,27000,28000,29000,30000,31000,32000,33000,34000,35000,36000,37000,38000,39000,40000,41000,42000,43000,44000,45000,46000,47000,48000,49000,50000,51000,52000,53000,54000,55000,56000,57000,58000,59000,60000,61000,62000,63000,64000,65000,66000,67000,68000,69000,70000,71000,72000,73000,74000,75000,76000,77000,78000,79000,80000,81000,82000,83000,84000,85000,86000,87000,88000,89000,90000,91000,92000,93000,94000,95000,96000,97000,98000,99000,100000,101000,102000,103000,104000,105000,106000,107000,108000,109000,110000,111000,112000,113000,114000,115000,116000,117000,118000,119000,120000,121000,122000,123000,124000,125000,126000,127000,128000,129000,130000,131000,132000,133000,134000,135000,136000,137000,138000,139000,140000,141000,142000,143000,144000,145000,146000,147000,148000,149000,150000,151000,152000,153000,154000,155000,156000,157000,158000,159000,160000,161000,162000,163000,164000,165000,166000,167000,168000,169000,170000,171000,172000,173000,174000,175000,176000,177000,178000,179000,180000,181000,182000,183000,184000,185000,186000,187000,188000,189000,190000,191000,192000,193000,194000,195000,196000,197000,198000,199000,200000,201000,202000,203000,204000,205000,206000,207000,208000,209000,210000,211000,212000,213000,214000,215000,216000,217000,218000,219000,220000,221000,222000,223000,224000,225000,226000,227000,228000,229000,230000,231000,232000,233000,234000,235000,236000,237000,238000,239000,240000,241000,242000,243000,244000,245000,246000,247000,248000,249000,250000,251000,252000,253000,254000,255000,256000,257000,258000,259000,260000,261000,262000,263000,264000,265000,266000,267000,268000,269000,270000,271000,272000,273000,274000,275000,276000,277000,278000,279000,280000,281000,282000,283000,284000,285000,286000,287000,288000,289000,290000,291000,292000,293000,294000,295000,296000,297000,298000,299000,300000,301000,302000,303000,304000,305000,306000,307000,308000,309000,310000,311000,312000,313000,314000,315000,316000,317000,318000,319000,320000,321000,322000,323000,324000,325000,326000,327000,328000,329000,330000,331000,332000,333000,334000,335000,336000,337000,338000,339000,340000,341000,342000,343000,344000,345000,346000,347000,348000,349000,350000,351000,352000,353000,354000,355000,356000,357000,358000,359000,360000,361000,362000,363000,364000,365000,366000,367000,368000,369000,370000,371000,372000,373000,374000,375000,376000,377000,378000,379000,380000,381000,382000,383000,384000,385000,386000,387000,388000,389000,390000,391000,392000,393000,394000,395000,396000,397000,398000,399000,400000,401000,402000,403000,404000,405000,406000,407000,408000,409000,410000,411000,412000,413000,414000,415000,416000,417000,418000,419000,420000,421000,422000,423000,424000,425000,426000,427000,428000,429000,430000,431000,432000,433000,434000,435000,436000,437000,438000,439000,440000,441000,442000,443000,444000,445000,446000,447000,448000,449000,450000,451000,452000,453000,454000,455000,456000,457000,458000,459000,460000,461000,462000,463000,464000,465000,466000,467000,468000,469000,470000,471000,472000,473000,474000,475000,476000,477000,478000,479000,480000,481000,482000,483000,484000,485000,486000,487000,488000,489000,490000,491000,492000,493000,494000,495000,496000,497000,498000,499000,500000,501000,502000,503000,504000],"marker":{"color":"#1f77b4","line":{"color":"rgba(31,119,180,1)"}},"name":"Savings Portfolio","type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[23.083333333333332,23.166666666666668,23.25,23.333333333333332,23.416666666666668,23.5,23.583333333333332,23.666666666666668,23.75,23.833333333333332,23.916666666666668,24,24.083333333333332,24.166666666666668,24.25,24.333333333333332,24.416666666666668,24.5,24.583333333333332,24.666666666666668,24.75,24.833333333333332,24.916666666666668,25,25.083333333333332,25.166666666666668,25.25,25.333333333333332,25.416666666666668,25.5,25.583333333333332,25.666666666666668,25.75,25.833333333333332,25.916666666666668,26,26.083333333333332,26.166666666666668,26.25,26.333333333333332,26.416666666666668,26.5,26.583333333333332,26.666666666666668,26.75,26.833333333333332,26.916666666666668,27,27.083333333333332,27.166666666666668,27.25,27.333333333333332,27.416666666666668,27.5,27.583333333333332,27.666666666666668,27.75,27.833333333333332,27.916666666666668,28,28.083333333333332,28.166666666666668,28.25,28.333333333333332,28.416666666666668,28.5,28.583333333333332,28.666666666666668,28.75,28.833333333333332,28.916666666666668,29,29.083333333333332,29.166666666666668,29.25,29.333333333333332,29.416666666666668,29.5,29.583333333333332,29.666666666666668,29.75,29.833333333333332,29.916666666666668,30,30.083333333333332,30.166666666666668,30.25,30.333333333333332,30.416666666666668,30.5,30.583333333333332,30.666666666666668,30.75,30.833333333333332,30.916666666666668,31,31.083333333333336,31.166666666666664,31.25,31.333333333333336,31.416666666666664,31.5,31.583333333333336,31.666666666666664,31.75,31.833333333333336,31.916666666666664,32,32.083333333333336,32.166666666666664,32.25,32.333333333333336,32.416666666666664,32.5,32.583333333333336,32.666666666666664,32.75,32.833333333333336,32.916666666666664,33,33.083333333333336,33.166666666666664,33.25,33.333333333333336,33.416666666666664,33.5,33.583333333333336,33.666666666666664,33.75,33.833333333333336,33.916666666666664,34,34.083333333333336,34.166666666666664,34.25,34.333333333333336,34.416666666666664,34.5,34.583333333333336,34.666666666666664,34.75,34.833333333333336,34.916666666666664,35,35.083333333333336,35.166666666666664,35.25,35.333333333333336,35.416666666666664,35.5,35.583333333333336,35.666666666666664,35.75,35.833333333333336,35.916666666666664,36,36.083333333333336,36.166666666666664,36.25,36.333333333333336,36.416666666666664,36.5,36.583333333333336,36.666666666666664,36.75,36.833333333333336,36.916666666666664,37,37.083333333333336,37.166666666666664,37.25,37.333333333333336,37.416666666666664,37.5,37.583333333333336,37.666666666666664,37.75,37.833333333333336,37.916666666666664,38,38.083333333333336,38.166666666666664,38.25,38.333333333333336,38.416666666666664,38.5,38.583333333333336,38.666666666666664,38.75,38.833333333333336,38.916666666666664,39,39.083333333333329,39.166666666666671,39.25,39.333333333333329,39.416666666666671,39.5,39.583333333333329,39.666666666666671,39.75,39.833333333333329,39.916666666666671,40,40.083333333333329,40.166666666666671,40.25,40.333333333333329,40.416666666666671,40.5,40.583333333333329,40.666666666666671,40.75,40.833333333333329,40.916666666666671,41,41.083333333333329,41.166666666666671,41.25,41.333333333333329,41.416666666666671,41.5,41.583333333333329,41.666666666666671,41.75,41.833333333333329,41.916666666666671,42,42.083333333333329,42.166666666666671,42.25,42.333333333333329,42.416666666666671,42.5,42.583333333333329,42.666666666666671,42.75,42.833333333333329,42.916666666666671,43,43.083333333333329,43.166666666666671,43.25,43.333333333333329,43.416666666666671,43.5,43.583333333333329,43.666666666666671,43.75,43.833333333333329,43.916666666666671,44,44.083333333333329,44.166666666666671,44.25,44.333333333333329,44.416666666666671,44.5,44.583333333333329,44.666666666666671,44.75,44.833333333333329,44.916666666666671,45,45.083333333333329,45.166666666666671,45.25,45.333333333333329,45.416666666666671,45.5,45.583333333333329,45.666666666666671,45.75,45.833333333333329,45.916666666666671,46,46.083333333333329,46.166666666666671,46.25,46.333333333333329,46.416666666666671,46.5,46.583333333333329,46.666666666666671,46.75,46.833333333333329,46.916666666666671,47,47.083333333333329,47.166666666666671,47.25,47.333333333333329,47.416666666666671,47.5,47.583333333333329,47.666666666666671,47.75,47.833333333333329,47.916666666666671,48,48.083333333333329,48.166666666666671,48.25,48.333333333333329,48.416666666666671,48.5,48.583333333333329,48.666666666666671,48.75,48.833333333333329,48.916666666666671,49,49.083333333333329,49.166666666666671,49.25,49.333333333333329,49.416666666666671,49.5,49.583333333333329,49.666666666666671,49.75,49.833333333333329,49.916666666666671,50,50.083333333333329,50.166666666666671,50.25,50.333333333333329,50.416666666666671,50.5,50.583333333333329,50.666666666666671,50.75,50.833333333333329,50.916666666666671,51,51.083333333333329,51.166666666666671,51.25,51.333333333333329,51.416666666666671,51.5,51.583333333333329,51.666666666666671,51.75,51.833333333333329,51.916666666666671,52,52.083333333333329,52.166666666666671,52.25,52.333333333333329,52.416666666666671,52.5,52.583333333333329,52.666666666666671,52.75,52.833333333333329,52.916666666666671,53,53.083333333333329,53.166666666666671,53.25,53.333333333333329,53.416666666666671,53.5,53.583333333333329,53.666666666666671,53.75,53.833333333333329,53.916666666666671,54,54.083333333333329,54.166666666666671,54.25,54.333333333333329,54.416666666666671,54.5,54.583333333333329,54.666666666666671,54.75,54.833333333333329,54.916666666666671,55,55.083333333333336,55.166666666666664,55.25,55.333333333333336,55.416666666666664,55.5,55.583333333333336,55.666666666666664,55.75,55.833333333333336,55.916666666666664,56,56.083333333333336,56.166666666666664,56.25,56.333333333333336,56.416666666666664,56.5,56.583333333333336,56.666666666666664,56.75,56.833333333333336,56.916666666666664,57,57.083333333333336,57.166666666666664,57.25,57.333333333333336,57.416666666666664,57.5,57.583333333333336,57.666666666666664,57.75,57.833333333333336,57.916666666666664,58,58.083333333333336,58.166666666666664,58.25,58.333333333333336,58.416666666666664,58.5,58.583333333333336,58.666666666666664,58.75,58.833333333333336,58.916666666666664,59,59.083333333333336,59.166666666666664,59.25,59.333333333333336,59.416666666666664,59.5,59.583333333333336,59.666666666666664,59.75,59.833333333333336,59.916666666666664,60,60.083333333333336,60.166666666666664,60.25,60.333333333333336,60.416666666666664,60.5,60.583333333333336,60.666666666666664,60.75,60.833333333333336,60.916666666666664,61,61.083333333333336,61.166666666666664,61.25,61.333333333333336,61.416666666666664,61.5,61.583333333333336,61.666666666666664,61.75,61.833333333333336,61.916666666666664,62,62.083333333333336,62.166666666666664,62.25,62.333333333333336,62.416666666666664,62.5,62.583333333333336,62.666666666666664,62.75,62.833333333333336,62.916666666666664,63,63.083333333333336,63.166666666666664,63.25,63.333333333333336,63.416666666666664,63.5,63.583333333333336,63.666666666666664,63.75,63.833333333333336,63.916666666666664,64,64.083333333333343,64.166666666666657,64.25,64.333333333333343,64.416666666666657,64.5,64.583333333333343,64.666666666666657,64.75,64.833333333333343,64.916666666666657,65],"y":[411455.23437488585,410795.72263603273,410135.66380705539,409475.05743412167,408813.90306302311,408152.20023917413,407489.9485076124,406827.14741299808,406163.79649961361,405499.89531136327,404835.44339177309,404170.44028399047,403504.88553078379,402838.77867454221,402172.11925727502,401504.90682061197,400837.14090580249,400168.82105371507,399499.94680483779,398830.51769927732,398160.53327675897,397489.99307662615,396818.89663784014,396147.24349897972,395475.03319824097,394802.2652734369,394128.93926199712,393455.05470096751,392780.61112700979,392105.60807640146,391430.04508503538,390753.92168841936,390077.23742167582,389399.99181954161,388722.18441636773,388043.81474611867,387364.88234237256,386685.38673832041,386005.32746676623,385324.70406012627,384643.51605042897,383961.7629693147,383279.44434803497,382596.55971745279,381913.10860804183,381229.09054988628,380544.50507268065,379859.35170572909,379173.62997794553,378487.33941785287,377800.47955358319,377113.0499128768,376425.05002308253,375736.47941115708,375047.33760366455,374357.62412677653,373667.33850627148,372976.48026753444,372285.04893555673,371593.04403493571,370900.46508987428,370207.31162418076,369513.58316126827,368819.27922415483,368124.3993354626,367428.94301741786,366732.90979185043,366036.29918019351,365339.11070348334,364641.34388235892,363942.99823706143,363244.07328743412,362544.56855292217,361844.48355257168,361143.81780503015,360442.57082854555,359740.74214096647,359038.33125974122,358335.33770191815,357631.76098414464,356927.60062266741,356222.85613333172,355517.52703158121,354811.6128324577,354105.11305060057,353398.02720024652,352690.35479522956,351982.09534898016,351273.24837452522,350563.8133844877,349853.78989108634,349143.17740613519,348431.97544104321,347720.18350681412,347007.80111404613,346294.82777293137,345581.26299325563,344867.10628439812,344152.35715533094,343437.01511461905,342721.07967041957,342004.55033048167,341287.4266021463,340569.70799234556,339851.39400760265,339132.4841540312,338412.97793733561,337692.87486280967,336972.17443533719,336250.87615939102,335528.9795390332,334806.48407791421,334083.3892792727,333359.69464593549,332635.3996803168,331910.50388441811,331185.00675982778,330458.90780772071,329732.20652885805,329004.90242358687,328276.99499183963,327548.48373313405,326819.36814657267,326089.64773084241,325359.32198421448,324628.3904045439,323896.85248926899,323164.7077354113,322431.95563957503,321698.5956979469,320964.62740629568,320230.05025997176,319494.86375390709,318759.06738261448,318022.66064018745,317285.6430202999,316548.01401620579,315809.77312073857,315070.91982631088,314331.45362491457,313591.37400811992,312850.68046707555,312109.37249250774,311367.44957472064,310624.91120359529,309881.75686858973,309137.98605873837,308393.598262652,307648.59296851687,306902.96966409491,306156.72783672297,305409.86697331269,304662.38656035013,303914.28608389531,303165.56502958183,302416.22288261692,301666.25912778033,300915.67324942473,300164.46473147493,299412.63305742765,298660.17771035118,297907.09817288502,297153.39392723941,296399.06445519498,295644.1092381028,294888.52775688341,294132.31949202681,293375.4839235922,292618.02053120726,291859.92879406811,291101.20819093887,290341.85820015107,289581.87829960382,288821.267966763,288060.02667866088,287298.15391189605,286535.64914263296,285772.51184660138,285008.74149909627,284244.33757497737,283479.29954866844,282713.6268941579,281947.31908499729,281180.37559430167,280412.795894749,279644.57945857977,278875.72575759667,278106.23426316422,277336.10444620845,276565.33577721647,275793.92772623635,275021.8797628762,274249.19135630428,273475.86197524867,272701.89108799648,271927.27816239389,271152.0226658457,270376.12406531471,269599.58182732179,268822.39541794499,268044.56430281961,267266.08794713783,266486.96581564785,265707.1973726541,264926.78208201646,264145.71940715023,263364.00881102547,262581.64975616697,261798.64170465324,261014.98411811702,260230.67645774412,259445.71818427357,258660.10875799702,257873.84763875837,257086.9342859535,256299.36815852977,255511.14871498579,254722.27541337089,253932.74771128493,253142.5650658778,252351.72693384896,251560.23277144734,250768.08203447072,249975.27417826545,249181.8086577261,248387.68492729511,247592.90244096215,246797.46065226418,246001.3590142848,245204.59697965375,244407.17400054695,243609.08952868573,242810.34301533661,242010.93391131097,241210.86166696457,240410.12573219725,239608.72555645253,238806.66058871723,238003.93027752094,237200.534070936,236396.47141657679,235591.74176159946,234786.3445527016,233980.27923612171,233173.54525763914,232366.1420625732,231558.06909578337,230749.32580166837,229939.91162416621,229129.82600675352,228319.0683924453,227507.63822379452,226695.53494289174,225882.75799136463,225069.30681037775,224255.18084063209,223440.37952236464,222624.90229534812,221808.74859889035,220991.91787183424,220174.40955255704,219356.22307897024,218537.35788851892,217717.81341818164,216897.58910446981,216076.68438342743,215255.09869063069,214432.83146118757,213609.88212973747,212786.25013045073,211961.9348970284,211136.93586270174,210311.25246023177,209484.8841219091,208657.83027955328,207830.09036451261,207001.66380766366,206172.55003941085,205342.74848968614,204512.2585879486,203681.07976318398,202849.21144390441,202016.65305814784,201183.40403347788,200349.46379698318,199514.8317752773,198679.50739449789,197843.49008030683,197006.7792578894,196169.37435195409,195331.27478673213,194492.4799859772,193652.98937296495,192812.80237049257,191971.91840087847,191130.33688596182,190288.05724710223,189445.07890517925,188601.40128059208,187757.02379325908,186911.94586261743,186066.16690762277,185219.68634674861,184372.50359798616,183524.61807884378,182676.02920634666,181826.73639703644,180976.73906697062,180126.03663172241,179274.62850638022,178422.51410554719,177569.69284334089,176716.16413339283,175861.92738884821,175006.98202236532,174151.3274461152,173294.96307178144,172437.88831055936,171580.10257315598,170721.60526978949,169862.39581018881,169002.47360359319,168141.8380587518,167280.48858392346,166418.42458687595,165555.64547488588,164692.15065473813,163827.93953272555,162963.01151464842,162097.36600581414,161231.00241103675,160363.9201346366,159496.11858043991,158627.59715177832,157758.35525148854,156888.39228191186,156017.70764489388,155146.30074178387,154274.17097343467,153401.31774020195,152527.74044194401,151653.43847802139,150778.41124729623,149902.65814813209,149026.17857839345,148148.97193544524,147271.03761615255,146392.37501688013,145512.98353349196,144632.86256135089,143752.01149531818,142870.42972975314,141988.11665851265,141105.07167495077,140221.29417191836,139336.78354176259,138451.53917632654,137565.56046694887,136678.84680446328,135791.39757919809,134903.21218097606,134014.28999911356,133124.63042242054,132234.23283919983,131343.09663724696,130451.22120384945,129558.6059257867,128665.25018932937,127771.15338023896,126876.3148837675,125980.73408465702,125084.41036713921,124187.34311493493,123289.53171125382,122390.97553879388,121491.67397974098,120591.62641576854,119690.83222803709,118789.29079719372,117887.00150337179,116983.96372619047,116080.17684475431,115175.64023765274,114270.35328295975,113364.31535823345,112457.52584051552,111549.98410633094,110641.68953168752,109732.64149207537,108822.83936246661,107912.28251731479,107000.97033055466,106088.90217560154,105176.077425351,104262.49545217844,103348.15562793851,102433.05732396494,101517.19991106982,100600.58275954341,99683.205239153554,98765.066719145281,97846.166568240398,96926.504154637078,96006.078846009346,95084.890009506707,94162.93701175366,93240.21921884935,92316.735996367031,91392.486709353703,90467.470722329643,89541.687399287985,88615.136103694211,87687.816198485874,86759.727046071959,85830.868008332603,84901.238446618605,83970.837721750911,83039.665194020345,82107.720223186989,81175.002168479856,80241.510388596405,79307.244241702108,78372.20308543001,77436.386276880308,76499.793172619873,75562.42312868181,74624.275500565069,73685.349643233931,72745.644911117575,71805.1606581097,70863.896237567998,69921.851002313793,68979.024304631501,68035.415496268266,67091.023928433453,66145.848951798253,65199.889916495216,64253.146172117784,63305.617067719868,62357.301951815403,61408.200172377881,60458.311076839927,59507.634012092822,58556.168324486076,57603.913359826962,56650.868463380088,55697.032979866934,54742.406253465386,53786.987627809314,52830.776445988107,51873.772050546213,50915.973783482703,49957.380986250799,48997.992999757473,48037.809164362894,47076.82881988008,46115.05130557438,45152.475960163043,44189.102121814758,43224.929128149197,42259.956316236567,41294.183022597143,40327.608583200832,39360.232333466687,38392.053608262482,37423.071741904205,36453.286068155685,35482.695920228041,34511.300630779282,33539.099531913831,32566.091955182063,31592.277231579843,30617.654691548087,29642.223664972269,28665.983481181989,27688.933468950505,26711.072956494252,25732.401271472394,24752.917740986391,23772.621691579465,22791.512449236223,21809.58933938211,20826.851686883027,19843.298816044786,18858.930050612711,17873.744713771135,16887.742128142956,15900.921615789155,14913.282498208338,13924.82409633627,12935.5457305454,11945.446720644411,10954.526385877731,9962.7840449250798,8970.2190159010006,7976.8306163543775,6982.6181632679818,5987.5809730579922,4991.7183615735321,3995.0296440961929,2997.5141353395675,1999.1711494487772,1000,0],"marker":{"color":"#ff7f0e","line":{"color":"rgba(255,127,14,1)"}},"name":"Current Value of Future Savings","type":"bar","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-total-over-life-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Total portfolio over life (1 k€ saved monthly from 23 to 65 years old, 0% yield on savings, 1% discount rate).
</figcaption>
</figure>
</div>
</div>
<p>Given that we consider future savings as bonds, it ensues that the asset class allocation on the total portfolio is inevitably heavily skewed in favor of bonds during a good portion of one’s life: when future savings represent 90% of the total portfolio, even if the savings portfolio is 100% stocks, the total portfolio seats at only 10% stocks. This is an issue for two reasons:</p>
<ul>
<li>the Merton-Samuelson share is not respected whereas it is meant to provide the adequate balance between expected returns and risk for the person.
<ul>
<li>Applying the share to the savings portfolio instead of the total one greatly accentuates the issue. If we consider that our person from above has a Merton-Samuelson share of 60%, <a href="#fig-alloc-over-life" class="quarto-xref">Figure&nbsp;2</a> shows that this proportion is only reached when all savings materialized (i.e., at the end of the working life) when the share is applied to the savings protfolio, while it is reached at age 47 when it is applied on the total portfolio. In other words, considering future savings justifies ramping up the allocation for risky assets more rapidly since, during a large part of one’s working life, those future savings imply that the target allocation for bonds (i.e., 100% minus the Merton-Samuelson share) is surpassed.</li>
<li>We’ll see in <a href="#sec-lev" class="quarto-xref">Section&nbsp;4</a> that leverage is a potential solution to further bridge the gap.</li>
</ul></li>
<li>And risk taking is poorly diversified over time as we’ll see in <a href="#sec-temp-div" class="quarto-xref">Section&nbsp;3</a>.</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>sm_share <span class="ot">&lt;-</span> .<span class="dv">6</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Share of stocks in the TP when the M-S share is applied to the SP</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>dt[</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    stocks_owned_appl_sp <span class="sc">:</span><span class="er">=</span> sp <span class="sc">*</span> sm_share</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>][</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    stocks_share_tp_appl_sp <span class="sc">:</span><span class="er">=</span> stocks_owned_appl_sp <span class="sc">/</span> tp</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Share of stocks in the TP when the M-S share is applied to the TP</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>dt[</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    stocks_owned_appl_tp <span class="sc">:</span><span class="er">=</span> <span class="fu">ifelse</span>(sp <span class="sc">&lt;</span> tp <span class="sc">*</span> sm_share, sp, tp <span class="sc">*</span> sm_share)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>][</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    stocks_share_tp_appl_tp <span class="sc">:</span><span class="er">=</span> stocks_owned_appl_tp <span class="sc">/</span> tp</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> dt, <span class="at">x =</span> <span class="sc">~</span>age) <span class="sc">|&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_lines</span>(</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span> stocks_share_tp_appl_sp <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Stocks % in Total Portfolio When Merton-Samuelson Share Applied to Savings Portfolio"</span>,</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#1f77b4"</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_lines</span>(</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span> stocks_share_tp_appl_tp <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Stocks % in Total Portfolio When Merton-Samuelson Share Applied to Total Portfolio"</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#ff7f0e"</span>)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layout</span>(</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">""</span>,</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Age"</span>),</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Stocks Share"</span>),</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend =</span> <span class="fu">list</span>(<span class="at">orientation =</span> <span class="st">"h"</span>, <span class="at">x =</span> <span class="fl">0.5</span>, <span class="at">xanchor =</span> <span class="st">"center"</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>),</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">hovermode =</span> <span class="st">"x"</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-alloc-over-life" class="cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-alloc-over-life-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="plotly html-widget html-fill-item" id="htmlwidget-ccfeb3bc1dee1c9e277d" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-ccfeb3bc1dee1c9e277d">{"x":{"visdat":{"14380ea84aa8":["function () ","plotlyVisDat"]},"cur_data":"14380ea84aa8","attrs":{"14380ea84aa8":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"lines","name":"Stocks % in Total Portfolio When Merton-Samuelson Share Applied to Savings Portfolio","line":{"color":"#1f77b4"},"inherit":true},"14380ea84aa8.1":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"lines","name":"Stocks % in Total Portfolio When Merton-Samuelson Share Applied to Total Portfolio","line":{"color":"#ff7f0e"},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"Age"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Stocks Share"},"legend":{"orientation":"h","x":0.5,"xanchor":"center","y":-0.20000000000000001},"hovermode":"x","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[23.083333333333332,23.166666666666668,23.25,23.333333333333332,23.416666666666668,23.5,23.583333333333332,23.666666666666668,23.75,23.833333333333332,23.916666666666668,24,24.083333333333332,24.166666666666668,24.25,24.333333333333332,24.416666666666668,24.5,24.583333333333332,24.666666666666668,24.75,24.833333333333332,24.916666666666668,25,25.083333333333332,25.166666666666668,25.25,25.333333333333332,25.416666666666668,25.5,25.583333333333332,25.666666666666668,25.75,25.833333333333332,25.916666666666668,26,26.083333333333332,26.166666666666668,26.25,26.333333333333332,26.416666666666668,26.5,26.583333333333332,26.666666666666668,26.75,26.833333333333332,26.916666666666668,27,27.083333333333332,27.166666666666668,27.25,27.333333333333332,27.416666666666668,27.5,27.583333333333332,27.666666666666668,27.75,27.833333333333332,27.916666666666668,28,28.083333333333332,28.166666666666668,28.25,28.333333333333332,28.416666666666668,28.5,28.583333333333332,28.666666666666668,28.75,28.833333333333332,28.916666666666668,29,29.083333333333332,29.166666666666668,29.25,29.333333333333332,29.416666666666668,29.5,29.583333333333332,29.666666666666668,29.75,29.833333333333332,29.916666666666668,30,30.083333333333332,30.166666666666668,30.25,30.333333333333332,30.416666666666668,30.5,30.583333333333332,30.666666666666668,30.75,30.833333333333332,30.916666666666668,31,31.083333333333336,31.166666666666664,31.25,31.333333333333336,31.416666666666664,31.5,31.583333333333336,31.666666666666664,31.75,31.833333333333336,31.916666666666664,32,32.083333333333336,32.166666666666664,32.25,32.333333333333336,32.416666666666664,32.5,32.583333333333336,32.666666666666664,32.75,32.833333333333336,32.916666666666664,33,33.083333333333336,33.166666666666664,33.25,33.333333333333336,33.416666666666664,33.5,33.583333333333336,33.666666666666664,33.75,33.833333333333336,33.916666666666664,34,34.083333333333336,34.166666666666664,34.25,34.333333333333336,34.416666666666664,34.5,34.583333333333336,34.666666666666664,34.75,34.833333333333336,34.916666666666664,35,35.083333333333336,35.166666666666664,35.25,35.333333333333336,35.416666666666664,35.5,35.583333333333336,35.666666666666664,35.75,35.833333333333336,35.916666666666664,36,36.083333333333336,36.166666666666664,36.25,36.333333333333336,36.416666666666664,36.5,36.583333333333336,36.666666666666664,36.75,36.833333333333336,36.916666666666664,37,37.083333333333336,37.166666666666664,37.25,37.333333333333336,37.416666666666664,37.5,37.583333333333336,37.666666666666664,37.75,37.833333333333336,37.916666666666664,38,38.083333333333336,38.166666666666664,38.25,38.333333333333336,38.416666666666664,38.5,38.583333333333336,38.666666666666664,38.75,38.833333333333336,38.916666666666664,39,39.083333333333329,39.166666666666671,39.25,39.333333333333329,39.416666666666671,39.5,39.583333333333329,39.666666666666671,39.75,39.833333333333329,39.916666666666671,40,40.083333333333329,40.166666666666671,40.25,40.333333333333329,40.416666666666671,40.5,40.583333333333329,40.666666666666671,40.75,40.833333333333329,40.916666666666671,41,41.083333333333329,41.166666666666671,41.25,41.333333333333329,41.416666666666671,41.5,41.583333333333329,41.666666666666671,41.75,41.833333333333329,41.916666666666671,42,42.083333333333329,42.166666666666671,42.25,42.333333333333329,42.416666666666671,42.5,42.583333333333329,42.666666666666671,42.75,42.833333333333329,42.916666666666671,43,43.083333333333329,43.166666666666671,43.25,43.333333333333329,43.416666666666671,43.5,43.583333333333329,43.666666666666671,43.75,43.833333333333329,43.916666666666671,44,44.083333333333329,44.166666666666671,44.25,44.333333333333329,44.416666666666671,44.5,44.583333333333329,44.666666666666671,44.75,44.833333333333329,44.916666666666671,45,45.083333333333329,45.166666666666671,45.25,45.333333333333329,45.416666666666671,45.5,45.583333333333329,45.666666666666671,45.75,45.833333333333329,45.916666666666671,46,46.083333333333329,46.166666666666671,46.25,46.333333333333329,46.416666666666671,46.5,46.583333333333329,46.666666666666671,46.75,46.833333333333329,46.916666666666671,47,47.083333333333329,47.166666666666671,47.25,47.333333333333329,47.416666666666671,47.5,47.583333333333329,47.666666666666671,47.75,47.833333333333329,47.916666666666671,48,48.083333333333329,48.166666666666671,48.25,48.333333333333329,48.416666666666671,48.5,48.583333333333329,48.666666666666671,48.75,48.833333333333329,48.916666666666671,49,49.083333333333329,49.166666666666671,49.25,49.333333333333329,49.416666666666671,49.5,49.583333333333329,49.666666666666671,49.75,49.833333333333329,49.916666666666671,50,50.083333333333329,50.166666666666671,50.25,50.333333333333329,50.416666666666671,50.5,50.583333333333329,50.666666666666671,50.75,50.833333333333329,50.916666666666671,51,51.083333333333329,51.166666666666671,51.25,51.333333333333329,51.416666666666671,51.5,51.583333333333329,51.666666666666671,51.75,51.833333333333329,51.916666666666671,52,52.083333333333329,52.166666666666671,52.25,52.333333333333329,52.416666666666671,52.5,52.583333333333329,52.666666666666671,52.75,52.833333333333329,52.916666666666671,53,53.083333333333329,53.166666666666671,53.25,53.333333333333329,53.416666666666671,53.5,53.583333333333329,53.666666666666671,53.75,53.833333333333329,53.916666666666671,54,54.083333333333329,54.166666666666671,54.25,54.333333333333329,54.416666666666671,54.5,54.583333333333329,54.666666666666671,54.75,54.833333333333329,54.916666666666671,55,55.083333333333336,55.166666666666664,55.25,55.333333333333336,55.416666666666664,55.5,55.583333333333336,55.666666666666664,55.75,55.833333333333336,55.916666666666664,56,56.083333333333336,56.166666666666664,56.25,56.333333333333336,56.416666666666664,56.5,56.583333333333336,56.666666666666664,56.75,56.833333333333336,56.916666666666664,57,57.083333333333336,57.166666666666664,57.25,57.333333333333336,57.416666666666664,57.5,57.583333333333336,57.666666666666664,57.75,57.833333333333336,57.916666666666664,58,58.083333333333336,58.166666666666664,58.25,58.333333333333336,58.416666666666664,58.5,58.583333333333336,58.666666666666664,58.75,58.833333333333336,58.916666666666664,59,59.083333333333336,59.166666666666664,59.25,59.333333333333336,59.416666666666664,59.5,59.583333333333336,59.666666666666664,59.75,59.833333333333336,59.916666666666664,60,60.083333333333336,60.166666666666664,60.25,60.333333333333336,60.416666666666664,60.5,60.583333333333336,60.666666666666664,60.75,60.833333333333336,60.916666666666664,61,61.083333333333336,61.166666666666664,61.25,61.333333333333336,61.416666666666664,61.5,61.583333333333336,61.666666666666664,61.75,61.833333333333336,61.916666666666664,62,62.083333333333336,62.166666666666664,62.25,62.333333333333336,62.416666666666664,62.5,62.583333333333336,62.666666666666664,62.75,62.833333333333336,62.916666666666664,63,63.083333333333336,63.166666666666664,63.25,63.333333333333336,63.416666666666664,63.5,63.583333333333336,63.666666666666664,63.75,63.833333333333336,63.916666666666664,64,64.083333333333343,64.166666666666657,64.25,64.333333333333343,64.416666666666657,64.5,64.583333333333343,64.666666666666657,64.75,64.833333333333343,64.916666666666657,65],"y":[0.14547033229178327,0.29070068661008275,0.43569223325165285,0.580446137402711,0.72496355917338662,0.86924565363192319,1.0132935708386339,1.1571084558796159,1.3006914489002237,1.4440436851383027,1.5871662949571881,1.730060403878467,1.8727271326145114,2.0151675971007776,2.1573829085278811,2.2993741733734403,2.4411424934337025,2.5826889658549428,2.7240146831646426,2.8651207333024544,3.0060081996509442,3.1466781610661263,3.2871316919077778,3.4273698620695505,3.5673937370088664,3.7072043777766108,3.8468028410466197,3.9861901791449634,4.1253674400790272,4.2643356675663933,4.4030959010635264,4.5416491757942579,4.6799965227780822,4.8181389688582561,4.9560775367297012,5.0938132449667357,5.2313471080505911,5.3686801363967671,5.505813336382186,5.6427477103721735,5.7794842567472502,5.916023969929749,6.0523678404102554,6.1885168547738596,6.3244719957262507,6.4602342421196219,6.5958045689784095,6.7311839475248672,6.8663733452044546,7.001373725711078,7.1361860490121494,7.2708112713734909,7.4052503453840623,7.5395042199805413,7.6735738404717422,7.8074601485628543,7.9411640823795535,8.0746865764919313,8.2080285619382831,8.3411909662487389,8.474174713468738,8.606980724182355,8.7396099155354801,8.8720632012588432,9.004341491690889,9.1364456938005247,9.2683767112096902,9.400135444215822,9.5317227898141432,9.6631396417198232,9.7943868903900118,9.9254654230457096,10.056376123693516,10.187119873147243,10.317697549049383,10.448110025892445,10.578358175040162,10.708442864748575,10.838364960186958,10.968125323458649,11.097724813621724,11.227164286709552,11.356444595751244,11.485566590791931,11.614531118912975,11.743339024252007,11.871991148022868,12.000488328535432,12.12883140121529,12.257021198623333,12.385058550475209,12.51294428366066,12.64067922226276,12.76826418757701,12.89569999813034,13.02298746969999,13.150127415332289,13.2771206453613,13.403967967427393,13.530670186495659,13.65722810487425,13.78364252223262,13.909914235619617,14.036044039481515,14.162032725679918,14.287881083509557,14.413589899715987,14.539159958513206,14.664592041601137,14.789886928183027,14.915045394982743,15.040068216261975,15.164956163837351,15.289710007097407,15.41433051301953,15.538818446186756,15.663174568804482,15.787399640717116,15.911494419424574,16.035459660098745,16.159296115599833,16.283004536492619,16.406585671062619,16.530040265332175,16.653369063076443,16.776572805839287,16.899652232949109,17.022608081534582,17.145441086540284,17.26815198074226,17.390741494763521,17.513210357089406,17.635559294082917,17.757789029999952,17.879900287004435,18.001893785183405,18.123770242561992,18.245530375118342,18.367174896798453,18.488704519530895,18.61011995324154,18.731421905868121,18.852611083374796,18.97368818976657,19.094653927103689,19.215508995515947,19.336254093216915,19.456889916518087,19.577417159842991,19.697836515741194,19.81814867490225,19.938354326169577,20.058454156554266,20.178448851248817,20.298339093640827,20.418125565326562,20.537808946124532,20.657389914088935,20.776869145523076,20.896247314992703,21.015525095339282,21.13470315769322,21.253782171487011,21.372762804468312,21.491645722712974,21.610431590638019,21.729121071014522,21.847714824980464,21.96621351205351,22.084617790143746,22.202928315566311,22.321145743054046,22.439270725769997,22.557303915319935,22.675245961764787,22.793097513633008,22.910859217932895,23.028531720164874,23.146115664333703,23.263611692960616,23.381020447095473,23.498342566328734,23.615578688803538,23.732729451227598,23.849795488885128,23.966777435648662,24.08367592399086,24.200491584996257,24.31722504837294,24.433876942464206,24.550447894260142,24.666938529409197,24.783349472229663,24.89968134572112,25.015934771575864,25.132110370190258,25.248208760676011,25.364230560871508,25.480176387352969,25.596046855445675,25.711842579235071,25.827564171577855,25.943212244113052,26.058787407272977,26.174290270294232,26.289721441228597,26.405081526953921,26.520371133184952,26.635590864484133,26.750741324272354,26.865823114839682,26.980836837355994,27.09578309188166,27.210662477378118,27.325475591718419,27.440223031697787,27.554905393044045,27.669523270428126,27.784077257474422,27.898567946771191,28.012995929880891,28.127361797350463,28.241666138721623,28.355909542541074,28.470092596370712,28.584215886797764,28.698279999444964,28.81228551898062,28.92623302912865,29.040123112678678,29.153956351495978,29.267733326531459,29.381454617831604,29.495120804548353,29.608732464949018,29.722290176426082,29.835794515507025,29.94924605786413,30.062645378324216,30.17599305087834,30.289289648691568,30.402535744112559,30.515731908683243,30.628878713148449,30.74197672746547,30.855026520813635,30.968028661603817,31.080983717487975,31.193892255368599,31.306754841408203,31.41957204103872,31.532344418970933,31.645072539203838,31.75775696503403,31.870398259064991,31.982996983216438,32.095553698733589,32.208068966196443,32.320543345529018,32.432977396008553,32.545371676274712,32.657726744338802,32.770043157592852,32.882321472818816,32.994562246197631,33.10676603331838,33.218933389187285,33.331064868236808,33.4431610243347,33.555222410792972,33.667249580376911,33.779243085314079,33.891203477303264,34.003131307523375,34.115027126642467,34.226891484826552,34.338724931748551,34.450528016597133,34.5623012880856,34.674045294460733,34.785760583511589,34.897447702578333,35.009107198561068,35.12073961792855,35.232345506727,35.343925410588866,35.455479874741528,35.567009444016065,35.678514662855946,35.789996075325725,35.90145422511975,36.012889655570838,36.124302909658901,36.235694530019657,36.347065058953248,36.458415038432825,36.569745010113252,36.681055515339658,36.792347095156025,36.903620290313825,37.014875641280568,37.126113688248353,37.237334971142488,37.348540029629987,37.459729403128115,37.570903630812978,37.682063251627966,37.793208804292355,37.904340827309753,38.015459858976627,38.126566437390835,38.237661100460066,38.348744385910351,38.459816831294525,38.570878974000721,38.681931351260836,38.792974500158969,38.90400895763991,39.015035260517557,39.126053945483413,39.237065549114973,39.348070607884232,39.459069658166058,39.570063236246646,39.681051878331985,39.792036120556247,39.903016498990219,40.013993549649733,40.124967808504096,40.235939811484506,40.346910094492458,40.457879193408182,40.568847644099037,40.679815982427975,40.790784744261892,40.90175446548011,41.012725681982744,41.123698929699167,41.234674744596376,41.345653662687461,41.456636220040011,41.567622952784511,41.678614397122828,41.789611089336596,41.900613565795616,42.011622362966392,42.122638017420449,42.233661065842874,42.344692045040702,42.455731491951369,42.566779943651206,42.677837937363826,42.788906010468672,42.8999847005094,43.011074545202426,43.122176082445343,43.233289850325448,43.34441638712822,43.45555623134581,43.566709921685558,43.67787799707849,43.789060996687851,43.900259459917621,44.011473926421054,44.122704936109237,44.233953029159608,44.345218746024521,44.456502627439868,44.567805214433584,44.67912704833428,44.790468670779845,44.901830623726013,45.013213449455023,45.124617690584252,45.236043890074797,45.347492591240218,45.458964337755141,45.570459673663919,45.681979143389391,45.793523291741515,45.905092663926119,46.01668780555363,46.128309262647768,46.239957581654373,46.351633309450122,46.463336993351326,46.575069181122721,46.686830420986311,46.798621261630139,46.910442252217187,47.022293942394214,47.134176882300608,47.246091622577318,47.358038714375752,47.47001870936667,47.582032159749161,47.694079618259607,47.806161638180647,47.91827877335016,48.030431578170315,48.142620607616578,48.254846417246796,48.367109563210214,48.47941060225665,48.591750091745531,48.70412858965507,48.816546654591427,48.929004845797834,49.041503723163878,49.154043847234625,49.266625779219922,49.379250081003654,49.491917315153025,49.604628044927857,49.717382834289921,49.83018224791234,49.94302685118889,50.055917210243486,50.16885389193957,50.281837463889559,50.394868494464347,50.507947552802811,50.621075208821345,50.734252033223385,50.847478597509046,50.960755473984698,51.074083235772626,51.187462456820697,51.300893711912032,51.414377576674774,51.527914627591812,51.641505442010562,51.755150598152788,51.868850675124456,51.982606252925599,52.096417912460204,52.210286235546185,52.324211804925305,52.438195204273207,52.552237018209425,52.666337832307455,52.780498233104858,52.894718808113375,53.009000145829113,53.123342835742683,53.237747468349518,53.352214635160067,53.466744928710128,53.5813389425712,53.695997271360781,53.810720510752894,53.925509257488422,54.040364109385663,54.155285665350824,54.270274525388572,54.38533129061264,54.500456563256463,54.61565094668385,54.730915045399712,54.846249465060779,54.961654812486437,55.077131695669557,55.192680723787326,55.308302507212218,55.423997657522939,55.539766787515411,55.655610511213858,55.771529443881832,55.887524202033411,56.003595403444365,56.119743667163291,56.235969613523054,56.35227386415189,56.468657041984962,56.585119771275593,56.701662677606869,56.818286387903015,56.934991530441025,57.051778734862211,57.168648632183874,57.285601854810984,57.402639036547932,57.519760812610308,57.636967819636752,57.754260695700879,57.871640080323161,57.989106614482999,58.106660940630718,58.224303702699721,58.342035546118574,58.459857117823312,58.577769066269639,58.695772041445281,58.813866694882343,58.932053679669764,59.050333650465781,59.168707263510512,59.287175176638563,59.405738049291635,59.524396542531299,59.643151319051789,59.762003043192792,59.88095238095238,60],"type":"scatter","mode":"lines","name":"Stocks % in Total Portfolio When Merton-Samuelson Share Applied to Savings Portfolio","line":{"color":"#1f77b4"},"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[23.083333333333332,23.166666666666668,23.25,23.333333333333332,23.416666666666668,23.5,23.583333333333332,23.666666666666668,23.75,23.833333333333332,23.916666666666668,24,24.083333333333332,24.166666666666668,24.25,24.333333333333332,24.416666666666668,24.5,24.583333333333332,24.666666666666668,24.75,24.833333333333332,24.916666666666668,25,25.083333333333332,25.166666666666668,25.25,25.333333333333332,25.416666666666668,25.5,25.583333333333332,25.666666666666668,25.75,25.833333333333332,25.916666666666668,26,26.083333333333332,26.166666666666668,26.25,26.333333333333332,26.416666666666668,26.5,26.583333333333332,26.666666666666668,26.75,26.833333333333332,26.916666666666668,27,27.083333333333332,27.166666666666668,27.25,27.333333333333332,27.416666666666668,27.5,27.583333333333332,27.666666666666668,27.75,27.833333333333332,27.916666666666668,28,28.083333333333332,28.166666666666668,28.25,28.333333333333332,28.416666666666668,28.5,28.583333333333332,28.666666666666668,28.75,28.833333333333332,28.916666666666668,29,29.083333333333332,29.166666666666668,29.25,29.333333333333332,29.416666666666668,29.5,29.583333333333332,29.666666666666668,29.75,29.833333333333332,29.916666666666668,30,30.083333333333332,30.166666666666668,30.25,30.333333333333332,30.416666666666668,30.5,30.583333333333332,30.666666666666668,30.75,30.833333333333332,30.916666666666668,31,31.083333333333336,31.166666666666664,31.25,31.333333333333336,31.416666666666664,31.5,31.583333333333336,31.666666666666664,31.75,31.833333333333336,31.916666666666664,32,32.083333333333336,32.166666666666664,32.25,32.333333333333336,32.416666666666664,32.5,32.583333333333336,32.666666666666664,32.75,32.833333333333336,32.916666666666664,33,33.083333333333336,33.166666666666664,33.25,33.333333333333336,33.416666666666664,33.5,33.583333333333336,33.666666666666664,33.75,33.833333333333336,33.916666666666664,34,34.083333333333336,34.166666666666664,34.25,34.333333333333336,34.416666666666664,34.5,34.583333333333336,34.666666666666664,34.75,34.833333333333336,34.916666666666664,35,35.083333333333336,35.166666666666664,35.25,35.333333333333336,35.416666666666664,35.5,35.583333333333336,35.666666666666664,35.75,35.833333333333336,35.916666666666664,36,36.083333333333336,36.166666666666664,36.25,36.333333333333336,36.416666666666664,36.5,36.583333333333336,36.666666666666664,36.75,36.833333333333336,36.916666666666664,37,37.083333333333336,37.166666666666664,37.25,37.333333333333336,37.416666666666664,37.5,37.583333333333336,37.666666666666664,37.75,37.833333333333336,37.916666666666664,38,38.083333333333336,38.166666666666664,38.25,38.333333333333336,38.416666666666664,38.5,38.583333333333336,38.666666666666664,38.75,38.833333333333336,38.916666666666664,39,39.083333333333329,39.166666666666671,39.25,39.333333333333329,39.416666666666671,39.5,39.583333333333329,39.666666666666671,39.75,39.833333333333329,39.916666666666671,40,40.083333333333329,40.166666666666671,40.25,40.333333333333329,40.416666666666671,40.5,40.583333333333329,40.666666666666671,40.75,40.833333333333329,40.916666666666671,41,41.083333333333329,41.166666666666671,41.25,41.333333333333329,41.416666666666671,41.5,41.583333333333329,41.666666666666671,41.75,41.833333333333329,41.916666666666671,42,42.083333333333329,42.166666666666671,42.25,42.333333333333329,42.416666666666671,42.5,42.583333333333329,42.666666666666671,42.75,42.833333333333329,42.916666666666671,43,43.083333333333329,43.166666666666671,43.25,43.333333333333329,43.416666666666671,43.5,43.583333333333329,43.666666666666671,43.75,43.833333333333329,43.916666666666671,44,44.083333333333329,44.166666666666671,44.25,44.333333333333329,44.416666666666671,44.5,44.583333333333329,44.666666666666671,44.75,44.833333333333329,44.916666666666671,45,45.083333333333329,45.166666666666671,45.25,45.333333333333329,45.416666666666671,45.5,45.583333333333329,45.666666666666671,45.75,45.833333333333329,45.916666666666671,46,46.083333333333329,46.166666666666671,46.25,46.333333333333329,46.416666666666671,46.5,46.583333333333329,46.666666666666671,46.75,46.833333333333329,46.916666666666671,47,47.083333333333329,47.166666666666671,47.25,47.333333333333329,47.416666666666671,47.5,47.583333333333329,47.666666666666671,47.75,47.833333333333329,47.916666666666671,48,48.083333333333329,48.166666666666671,48.25,48.333333333333329,48.416666666666671,48.5,48.583333333333329,48.666666666666671,48.75,48.833333333333329,48.916666666666671,49,49.083333333333329,49.166666666666671,49.25,49.333333333333329,49.416666666666671,49.5,49.583333333333329,49.666666666666671,49.75,49.833333333333329,49.916666666666671,50,50.083333333333329,50.166666666666671,50.25,50.333333333333329,50.416666666666671,50.5,50.583333333333329,50.666666666666671,50.75,50.833333333333329,50.916666666666671,51,51.083333333333329,51.166666666666671,51.25,51.333333333333329,51.416666666666671,51.5,51.583333333333329,51.666666666666671,51.75,51.833333333333329,51.916666666666671,52,52.083333333333329,52.166666666666671,52.25,52.333333333333329,52.416666666666671,52.5,52.583333333333329,52.666666666666671,52.75,52.833333333333329,52.916666666666671,53,53.083333333333329,53.166666666666671,53.25,53.333333333333329,53.416666666666671,53.5,53.583333333333329,53.666666666666671,53.75,53.833333333333329,53.916666666666671,54,54.083333333333329,54.166666666666671,54.25,54.333333333333329,54.416666666666671,54.5,54.583333333333329,54.666666666666671,54.75,54.833333333333329,54.916666666666671,55,55.083333333333336,55.166666666666664,55.25,55.333333333333336,55.416666666666664,55.5,55.583333333333336,55.666666666666664,55.75,55.833333333333336,55.916666666666664,56,56.083333333333336,56.166666666666664,56.25,56.333333333333336,56.416666666666664,56.5,56.583333333333336,56.666666666666664,56.75,56.833333333333336,56.916666666666664,57,57.083333333333336,57.166666666666664,57.25,57.333333333333336,57.416666666666664,57.5,57.583333333333336,57.666666666666664,57.75,57.833333333333336,57.916666666666664,58,58.083333333333336,58.166666666666664,58.25,58.333333333333336,58.416666666666664,58.5,58.583333333333336,58.666666666666664,58.75,58.833333333333336,58.916666666666664,59,59.083333333333336,59.166666666666664,59.25,59.333333333333336,59.416666666666664,59.5,59.583333333333336,59.666666666666664,59.75,59.833333333333336,59.916666666666664,60,60.083333333333336,60.166666666666664,60.25,60.333333333333336,60.416666666666664,60.5,60.583333333333336,60.666666666666664,60.75,60.833333333333336,60.916666666666664,61,61.083333333333336,61.166666666666664,61.25,61.333333333333336,61.416666666666664,61.5,61.583333333333336,61.666666666666664,61.75,61.833333333333336,61.916666666666664,62,62.083333333333336,62.166666666666664,62.25,62.333333333333336,62.416666666666664,62.5,62.583333333333336,62.666666666666664,62.75,62.833333333333336,62.916666666666664,63,63.083333333333336,63.166666666666664,63.25,63.333333333333336,63.416666666666664,63.5,63.583333333333336,63.666666666666664,63.75,63.833333333333336,63.916666666666664,64,64.083333333333343,64.166666666666657,64.25,64.333333333333343,64.416666666666657,64.5,64.583333333333343,64.666666666666657,64.75,64.833333333333343,64.916666666666657,65],"y":[0.24245055381963881,0.48450114435013797,0.72615372208608797,0.96741022900451823,1.2082725986223108,1.4487427560532051,1.6888226180643895,1.9285140931326932,2.1678190815003728,2.4067394752305042,2.6452771582619801,2.8834340064641117,3.1212118876908521,3.3586126618346293,3.5956381808798019,3.8322902889557344,4.0685708223895043,4.3044816097582377,4.5400244719410709,4.7752012221707574,5.0100136660849071,5.2444636017768769,5.4785528198462972,5.7122831034492512,5.9456562283481107,6.1786739629610183,6.4113380684110339,6.6436502985749391,6.8756124001317112,7.1072261126106566,7.3384931684392116,7.5694152929904295,7.7999942046301367,8.0302316147637587,8.2601292278828353,8.4896887416112268,8.7189118467509843,8.9478002273279458,9.1763555606369778,9.4045795172869564,9.6324737612454179,9.8600399498829141,10.087279734017091,10.314194757956432,10.54078665954375,10.767057070199371,10.993007614964016,11.218639912541445,11.443955575340757,11.668956209518463,11.89364341502025,12.118018785622485,12.342083908973436,12.565840366634237,12.789289734119569,13.01243358093809,13.235273470632588,13.457810960819886,13.680047603230472,13.9019849437479,14.123624522447898,14.344967873637257,14.56601652589247,14.78677200209807,15.007235819484816,15.22740948966754,15.447294518682817,15.666892407026371,15.886204649690239,16.105232736199703,16.323978150650017,16.542442371742851,16.760626872822527,16.978533121912072,17.196162581748972,17.41351670982074,17.630596958400268,17.847404774580959,18.063941600311598,18.280208872431082,18.496208022702874,18.711940477849254,18.927407659585405,19.142610984653217,19.357551864854958,19.572231707086679,19.786651913371447,20.000813880892387,20.214719002025483,20.428368664372222,20.641764250792015,20.854907139434435,21.067798703771267,21.28044031262835,21.492833330217231,21.704979116166648,21.916879025553811,22.128534408935501,22.339946612378991,22.551116977492761,22.762046841457082,22.972737537054364,23.183190392699359,23.393406732469195,23.603387876133198,23.813135139182595,24.022649832859976,24.23193326418868,24.440986736001896,24.649811546971712,24.858408991637905,25.066780360436624,25.274926939728914,25.482850011829012,25.690550855032551,25.89803074364459,26.105290948007472,26.312332734528525,26.519157365707624,26.72576610016457,26.932160192666387,27.138340894154368,27.344309451771032,27.55006710888696,27.755615105127408,27.960954676398806,28.166087054915184,28.371013469224305,28.575735144233803,28.780253301237103,28.984569157939198,29.188683928482344,29.392598823471534,29.596315049999916,29.799833811674059,30.003156308639007,30.206283737603322,30.409217291863911,30.611958161330755,30.814507532551495,31.016866588735898,31.219036509780203,31.42101847229133,31.622813649610947,31.824423211839481,32.025848325859911,32.227090155361523,32.428149860863478,32.629028599738319,32.829727526235324,33.030247791503754,33.230590543615961,33.430756927590444,33.630748085414695,33.830565156068047,34.030209275544273,34.229681576874221,34.42898319014823,34.628115242538456,34.827078858321173,35.025875158898806,35.224505262822035,35.422970285811687,35.621271340780517,35.819409537854959,36.017385984396697,36.215201785024206,36.412858041634102,36.610355853422519,36.807696316906238,37.004880525943854,37.201909571756744,37.398784542949997,37.595506525533224,37.792076602941307,37.98849585605501,38.184765363221487,38.380886200274787,38.57685944055617,38.772686154934362,38.968367411825788,39.163904277214556,39.359297814672559,39.554549085379328,39.74965914814188,39.944629059414439,40.139459873318103,40.334152641660431,40.528708413954902,40.723128237440342,40.917413157100235,41.111564215681994,41.305582453716106,41.499468909535196,41.693224619293112,41.886850616983764,42.080347934460022,42.27371760145251,42.46696064558828,42.660078092409456,42.853070965391787,43.045940285963091,43.238687073521746,43.431312345454955,43.623817117157046,43.816202402047658,44.008469211589869,44.200618555308246,44.392651440806887,44.584568873787255,44.776371858066135,44.968061395593317,45.159638486469426,45.351104128963527,45.5424593195307,45.733705052829642,45.92484232174008,46.115872117380206,46.306795429124037,46.497613244618648,46.688326549801488,46.878936328917433,47.069443564536037,47.25984923756846,47.450154327284515,47.64035981132961,47.830466665741611,48.020475864967693,48.210388381881081,48.400205187797802,48.589927252493304,48.7795555442191,48.969091029719337,49.158534674247257,49.347887441581697,49.537150294043471,49.726324192511711,49.915410096440219,50.104408963873695,50.293321751463907,50.482149414485953,50.670892906854256,50.859553181138729,51.048131188580747,51.236627879109122,51.425044201356066,51.613381102673031,51.801639529146627,51.98982042561434,52.177924735680335,52.36595340173119,52.553907364951556,52.741787565339735,52.92959494172338,53.117330431774988,53.304994972027394,53.49258949788932,53.68011494366074,53.867572242548356,54.054962326680908,54.24228612712453,54.429544573898006,54.616738595988082,54.803869121364691,54.990937076996062,55.177943388863973,55.364888981978801,55.551774780394695,55.738601707224497,55.925370684654951,56.112082633961521,56.298738475523471,56.48533912883876,56.671885512538964,56.858378544404111,57.044819141377587,57.231208219580921,57.417546694328557,57.603835480142664,57.790075490767876,57.976267639185977,58.162412837630562,58.348511997601783,58.534566029880907,58.720575844544996,58.906542350981439,59.092466457902546,59.278349073360118,59.464191104759912,59.649993458876203,59.835757041866259,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60],"type":"scatter","mode":"lines","name":"Stocks % in Total Portfolio When Merton-Samuelson Share Applied to Total Portfolio","line":{"color":"#ff7f0e"},"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-alloc-over-life-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Asset class allocation over life (60% Merton-Samuelson share, no leverage, 0% yield on savings)
</figcaption>
</figure>
</div>
</div>
</section>
<section id="sec-temp-div" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Temporal diversification</h1>
<p>Asset diversification was referred to as “the only free lunch” by Nobel Prize laurerate Harry Markowitz. It basically consists in putting one’s eggs in many different baskets. But a similar principle also exists in the time dimension – it’s temporal diversification: capital exposition to the markets over life should be distributed over time, by opposition to being lumped over a period during which a crisis could occur, for instance. What is an “amount of exposition”? It corresponds to the duration multiplied by the amount of an investment, expressed in euro-months (or euro-years, etc.).</p>
<p><a href="#fig-temp-div" class="quarto-xref">Figure&nbsp;3</a> shows how the total amount of exposition to stocks is distributed over the working life of our person depending on whether the Merton-Samuelson share is applied to their savings or total portfolio. We can see that the latter does a better job at smoothing the exposition over time.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># euro-months per 6-year bin</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>years_step <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    dt[, <span class="fu">as.integer</span>(<span class="fu">min</span>(age))],</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    dt[, <span class="fu">as.integer</span>(<span class="fu">max</span>(age))],</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> years_step</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>dt[, age_bin <span class="sc">:</span><span class="er">=</span> <span class="fu">cut</span>(age, <span class="at">breaks =</span> bins, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">FALSE</span>)]</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>temp_div_dt <span class="ot">&lt;-</span> dt[</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    .(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">stocks_euro_months_appl_sp =</span> <span class="fu">sum</span>(stocks_owned_appl_sp),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">stocks_euro_months_appl_tp =</span> <span class="fu">sum</span>(stocks_owned_appl_tp)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    by <span class="ot">=</span> age_bin</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>][</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">:=</span><span class="st">`</span>(</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">share_tot_stocks_euro_months_appl_sp =</span> stocks_euro_months_appl_sp <span class="sc">/</span> <span class="fu">sum</span>(stocks_euro_months_appl_sp),</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">share_tot_stocks_euro_months_appl_tp =</span> stocks_euro_months_appl_tp <span class="sc">/</span> <span class="fu">sum</span>(stocks_euro_months_appl_tp),</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">ideal_share_tot_stocks_euro_months =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">length</span>(bins)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> temp_div_dt,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="sc">~</span>age_bin,</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="sc">~</span> share_tot_stocks_euro_months_appl_sp <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"bar"</span>,</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Merton-Samuelson Share Applied to Savings Portfolio"</span>,</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#1f77b4"</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_trace</span>(</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span> share_tot_stocks_euro_months_appl_tp <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Merton-Samuelson Share Applied to Total Portfolio"</span>,</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#ff7f0e"</span>)</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_trace</span>(</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span> ideal_share_tot_stocks_euro_months <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Perfect Temporal Diversification"</span>,</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#2ca02c"</span>)</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layout</span>(</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">""</span>,</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">"Age ("</span>, years_step, <span class="st">"-year bins)"</span>)),</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Share of Working Life Stocks Euro-months"</span>),</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend =</span> <span class="fu">list</span>(<span class="at">orientation =</span> <span class="st">"h"</span>, <span class="at">x =</span> <span class="fl">0.5</span>, <span class="at">xanchor =</span> <span class="st">"center"</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>),</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">hovermode =</span> <span class="st">"x"</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-temp-div" class="cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-temp-div-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="plotly html-widget html-fill-item" id="htmlwidget-249fe8d8e9c529d70c63" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-249fe8d8e9c529d70c63">{"x":{"visdat":{"1438056183bdd":["function () ","plotlyVisDat"]},"cur_data":"1438056183bdd","attrs":{"1438056183bdd":{"x":{},"y":{},"marker":{"color":"#1f77b4"},"name":"Merton-Samuelson Share Applied to Savings Portfolio","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"1438056183bdd.1":{"x":{},"y":{},"marker":{"color":"#ff7f0e"},"name":"Merton-Samuelson Share Applied to Total Portfolio","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true},"1438056183bdd.2":{"x":{},"y":{},"marker":{"color":"#2ca02c"},"name":"Perfect Temporal Diversification","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"Age (6-year bins)","type":"category","categoryorder":"array","categoryarray":["[23,29)","[29,35)","[35,41)","[41,47)","[47,53)","[53,59)","[59,65]"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Share of Working Life Stocks Euro-months"},"legend":{"orientation":"h","x":0.5,"xanchor":"center","y":-0.20000000000000001},"hovermode":"x","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["[23,29)","[29,35)","[35,41)","[41,47)","[47,53)","[53,59)","[59,65]"],"y":[2.0084865629420086,6.082036775106082,10.155586987270155,14.229137199434231,18.302687411598303,22.376237623762378,26.845827439886843],"marker":{"color":"#1f77b4","line":{"color":"rgba(31,119,180,1)"}},"name":"Merton-Samuelson Share Applied to Savings Portfolio","type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["[23,29)","[29,35)","[35,41)","[41,47)","[47,53)","[53,59)","[59,65]"],"y":[2.4081246410590973,7.2922084201085342,12.17629219915797,17.060375978207407,19.978250450096041,20.315414893007365,20.76933341836358],"marker":{"color":"#ff7f0e","line":{"color":"rgba(255,127,14,1)"}},"name":"Merton-Samuelson Share Applied to Total Portfolio","type":"bar","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["[23,29)","[29,35)","[35,41)","[41,47)","[47,53)","[53,59)","[59,65]"],"y":[12.5,12.5,12.5,12.5,12.5,12.5,12.5],"marker":{"color":"#2ca02c","line":{"color":"rgba(44,160,44,1)"}},"name":"Perfect Temporal Diversification","type":"bar","error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-temp-div-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Exposition to stocks over life
</figcaption>
</figure>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>stocks_expo_unsmoothness_appl_sp <span class="ot">&lt;-</span> temp_div_dt[</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(<span class="fu">abs</span>(share_tot_stocks_euro_months_appl_sp <span class="sc">-</span> ideal_share_tot_stocks_euro_months))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>stocks_expo_unsmoothness_appl_tp <span class="ot">&lt;-</span> temp_div_dt[</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(<span class="fu">abs</span>(share_tot_stocks_euro_months_appl_tp <span class="sc">-</span> ideal_share_tot_stocks_euro_months))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This smoothing can be quantified via the absolute difference between the share of stocks exposition and the share of stocks exposition in the theoretical scenario of ideal temporal diversification – the lower this difference, the better the distribution. In the scenario where the Merton-Samuelson share is applied to the savings portfolio, the total absolute difference equals 51 percentage points. When it is instead applied to the total portfolio, the total absolute difference equals 44 percentage points – that is a 14% gain in temporal diversification in our fictional case.</p>
</section>
<section id="sec-lev" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Leverage</h1>
<p>We have showed that applying the Merton-Samuelson share to the total portfolio helps in better respecting one’s level of risk aversion and in improving the level of temporal diversification. But the plots show that those improvements are far from complete. A possible solution to bridge the gap further is leverage: when one’s savings portfolio is too small relative to one’s total portfolio to completely apply the Merton-Samuelson share, they can borrow money and invest it in risky assets as part of their now-increased savings portfolio. This allows for a more rapid ramp up of the exposition to stocks in the first section of working life. The share is better respected and more risky assets exposition takes place at this early age hence spreading one’s temporal exposition.</p>
<p>On the paper, this is almost a no brainer for people with a low enough risk aversion. But actually implementing leverage is often complicated and/or implies additional risk factors. Those additional factors are:</p>
<ul>
<li>the cost of borrowing (if high, leveraging is a loosing strategy),</li>
<li>and, in the case of leveraged ETFs (LETFs) with daily rebalancing, the volatility of the asset being leveraged – as it reduces LETFs’ price regardless of the price of the underlying asset (we’ll come back to this in a future study).</li>
</ul>
<p>Ayres &amp; Nalebuff (<a href="https://www.amazon.com/gp/product/0465018297">2010</a>) advocated for a x2 leverage maximum. But, since then, borrowing became more expensive and taking a bet on this cost and on a low volatility in the future can be daunting. This lead Ben Mathew to exlude leverage from his TPAW Planner, for instance (cf.&nbsp;the “Leverage and Its Limits” section <a href="https://tpawplanner.com/learn/future-savings-and-retirement-income">here</a>).</p>
</section>
<section id="appendix" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Appendix</h1>
<p>This <code>qmd</code> took 0 minutes to render. It was rendered in the following environment:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sessionInfo</span>(), <span class="at">locale =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.1 (2025-06-13)
Platform: x86_64-pc-linux-gnu
Running under: Ubuntu 24.04.2 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 
LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
[1] plotly_4.11.0     ggplot2_3.5.2     data.table_1.17.6

loaded via a namespace (and not attached):
 [1] vctrs_0.6.5        httr_1.4.7         cli_3.6.5          knitr_1.50        
 [5] rlang_1.1.6        xfun_0.52          purrr_1.0.4        renv_1.1.4        
 [9] generics_0.1.4     jsonlite_2.0.0     glue_1.8.0         htmltools_0.5.8.1 
[13] scales_1.4.0       rmarkdown_2.29     grid_4.5.1         crosstalk_1.2.1   
[17] evaluate_1.0.4     tibble_3.3.0       fastmap_1.2.0      yaml_2.3.10       
[21] lifecycle_1.0.4    compiler_4.5.1     dplyr_1.1.4        RColorBrewer_1.1-3
[25] htmlwidgets_1.6.4  pkgconfig_2.0.3    tidyr_1.3.1        farver_2.1.2      
[29] digest_0.6.37      viridisLite_0.4.2  R6_2.6.1           tidyselect_1.2.1  
[33] pillar_1.10.2      magrittr_2.0.3     withr_3.0.2        tools_4.5.1       
[37] gtable_0.3.6       lazyeval_0.2.2    </code></pre>
</div>
</div>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb7" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Lifecycle Investing"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Konilo Zio"</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "`r format(Sys.time(), '%d/%m/%Y')`"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-expand: true</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 5</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup}</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># record t0 (see the appendix)</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>t0 <span class="ot">&lt;-</span> <span class="fu">proc.time</span>()</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co"># required packages</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>Lifecycle investing is a saving and investing model originally developed by Ayres &amp; Nalebuff (<span class="co">[</span><span class="ot">2010</span><span class="co">](https://www.amazon.com/gp/product/0465018297)</span>) which excels in the realm of retirement planning. This document dives into a few striking aspects of this approach in the context of retirement planning.</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>For a proper introduction to lifecycle investing:</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>refer to the book by Ayres &amp; Nalebuff,</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>read the <span class="co">[</span><span class="ot">documentation of the TPAW Planner</span><span class="co">](https://tpawplanner.com/learn)</span> by Ben Mathew,</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>or listen to him on <span class="co">[</span><span class="ot">The Rational Reminder Podcast Episode 340</span><span class="co">](https://open.spotify.com/episode/4QKJlnDQQxCm0JoxYg4hLI)</span>.</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="fu"># Considering the present value of the future savings</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>In lifecycle investing, the capital to consider and manage at each point in time -- the *total portfolio* ($TP$) -- is the sum of the current savings -- the *savings portfolio* ($SP$) -- and of the present of value of the future savings ($CVFS$) (@eq-tp). Let's explain.</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>TP = SP + CVFS</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>$$ {#eq-tp}</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Based on one's level of risk aversion, a certain share of their investment portfolio should be allocated to risky assets (stocks, typically) and the rest to relatively less risky assets (bonds, typically) -- this is the Merton-Samuelson share.</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>One simplistic way to apply this share is to apply it to the savings portfolio i.e., the capital one currently possesses in the bank (or in the form of real estate, etc.).</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The issue with this method is that it ignores the capital that has not yet materialized but is likely to in the future: that is savings from future salaries, typically. On one hand, it might feel risky to bet on these future savings -- who knows what the future holds -- but, on the other hand, it is generally overly conservative to assume that no future savings will ever be made. So, it makes sense to make a cautious but considerable assumption for planning sakes.</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Since we are relatively confident that those future savings will actually be made, they can be added to the savings portfolio like if they were bonds (low return and low risk). </span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>Now, how to compute their *current* value? Considering those savings like bonds implies that their value grows up until they reach maturity and migrate as savings in the savings portfolio. That means that their current value depends on the yield of bonds and on the time between now and the materialization of the saving. If we consider that 10 k€ will be saved from one's salary 10 years from now and using a yearly yield of 1%, then the current value of those savings is $10000 / (1 + 0.01)^{10}=9052.87$. This is like rewinding 10 years of yield. The yield manipulated this way is also called a *discount rate*: we apply it in reverse to discount the final value and obtain the current value. @eq-cvfs-i provides the formula with $CVFS_i$ being the current value of the future saving *i*, $FS_i$ being the future saving *i* in question, $DR$ being the discount rate, and $NY$ corresponding to the number of years between now and the materialization of saving *i*.</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>CVFS_i = \frac{FS_i}{(1 + DR)^{NY}}</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>$$ {#eq-cvfs-i}</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>To generalize this to all future savings (future savings *1* to *n*), we just make a sum and use the number of years that corresponds to each ($NY_i$):</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>CVFS = \sum_{i=1}^{n}\frac{FS_i}{(1 + DR)^{NY_i}}</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>$$ {#eq-cvfs}</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>Let's take a simple scenario and illustrate the evolution of the total portfolio. We'll consider a person that saves a constant 1 k€ per month and a discount rate of 1%, and visualize their total portfolio from age 23 to 65 i.e., during their working life, excluding capital gains in the savings portfolio (0% yield). We can see that future savings go from representing 0% to 100% of the total portfolio as they gradually materialize and get turned into actual savings (@fig-total-over-life).</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-total-over-life</span></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Total portfolio over life (1 k€ saved monthly from 23 to 65 years old, 0% yield on savings, 1% discount rate)."</span></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>compute_cvfs <span class="ot">&lt;-</span> <span class="cf">function</span>(month_idx, last_month_idx, monthly_savings, discount_rate) {</span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (month_idx <span class="sc">==</span> last_month_idx) {</span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>        <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>    month_idx_cvfs <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (future_month_idx <span class="cf">in</span> (month_idx <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span>last_month_idx) {</span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>        month_idx_cvfs <span class="ot">&lt;-</span> month_idx_cvfs <span class="sc">+</span></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>            monthly_savings <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> discount_rate)<span class="sc">^</span>((last_month_idx <span class="sc">-</span> future_month_idx) <span class="sc">/</span> <span class="dv">12</span>)</span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(month_idx_cvfs)</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>project_no_return_pf <span class="ot">&lt;-</span> <span class="cf">function</span>(age_start, age_stop, monthly_savings, discount_rate) {</span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>    last_month_idx <span class="ot">&lt;-</span> (age_stop <span class="sc">-</span> age_start) <span class="sc">*</span> <span class="dv">12</span></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.table</span>(</span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">month_idx =</span> <span class="dv">1</span><span class="sc">:</span>last_month_idx</span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>    )[</span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>        ,</span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>        <span class="st">`</span><span class="at">:=</span><span class="st">`</span>(</span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>            <span class="at">age =</span> age_start <span class="sc">+</span> month_idx <span class="sc">/</span> <span class="dv">12</span>,</span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a>            <span class="at">sp =</span> monthly_savings <span class="sc">*</span> month_idx,</span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>            <span class="at">cvfs =</span> <span class="fu">sapply</span>(</span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>                month_idx,</span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>                <span class="cf">function</span>(idx) <span class="fu">compute_cvfs</span>(idx, last_month_idx, monthly_savings, discount_rate)</span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>    ][</span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>        ,</span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>        tp <span class="sc">:</span><span class="er">=</span> sp <span class="sc">+</span> cvfs</span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">project_no_return_pf</span>(<span class="dv">23</span>, <span class="dv">65</span>, <span class="dv">1000</span>, <span class="fl">0.01</span>)</span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a><span class="co"># Update colors for SP and TP/CVFS in plots</span></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> dt, <span class="at">x =</span> <span class="sc">~</span>age, <span class="at">y =</span> <span class="sc">~</span>sp, <span class="at">type =</span> <span class="st">"bar"</span>, <span class="at">name =</span> <span class="st">"Savings Portfolio"</span>, <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#1f77b4"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span>cvfs, <span class="at">name =</span> <span class="st">"Current Value of Future Savings"</span>, <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#ff7f0e"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layout</span>(</span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a>        <span class="at">barmode =</span> <span class="st">"stack"</span>,</span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">""</span>,</span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a>        <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Age"</span>),</span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>        <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Portfolio Value"</span>),</span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend =</span> <span class="fu">list</span>(<span class="at">orientation =</span> <span class="st">"h"</span>, <span class="at">x =</span> <span class="fl">0.5</span>, <span class="at">xanchor =</span> <span class="st">"center"</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>),</span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a>        <span class="at">hovermode =</span> <span class="st">"x"</span></span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a>Given that we consider future savings as bonds, it ensues that the asset class allocation on the total portfolio is inevitably heavily skewed in favor of bonds during a good portion of one's life: when future savings represent 90% of the total portfolio, even if the savings portfolio is 100% stocks, the total portfolio seats at only 10% stocks. This is an issue for two reasons:</span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>the Merton-Samuelson share is not respected whereas it is meant to provide the adequate balance between expected returns and risk for the person.</span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Applying the share to the savings portfolio instead of the total one greatly accentuates the issue. If we consider that our person from above has a Merton-Samuelson share of 60%, @fig-alloc-over-life shows that this proportion is only reached when all savings materialized (i.e., at the end of the working life) when the share is applied to the savings protfolio, while it is reached at age 47 when it is applied on the total portfolio. In other words, considering future savings justifies ramping up the allocation for risky assets more rapidly since, during a large part of one's working life, those future savings imply that the target allocation for bonds (i.e., 100% minus the Merton-Samuelson share) is surpassed.</span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>We'll see in @sec-lev that leverage is a potential solution to further bridge the gap.</span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>And risk taking is poorly diversified over time as we'll see in @sec-temp-div.</span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-alloc-over-life</span></span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Asset class allocation over life (60% Merton-Samuelson share, no leverage, 0% yield on savings)"</span></span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a>sm_share <span class="ot">&lt;-</span> .<span class="dv">6</span></span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a><span class="co"># Share of stocks in the TP when the M-S share is applied to the SP</span></span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a>dt[</span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a>    stocks_owned_appl_sp <span class="sc">:</span><span class="er">=</span> sp <span class="sc">*</span> sm_share</span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a>][</span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a>    stocks_share_tp_appl_sp <span class="sc">:</span><span class="er">=</span> stocks_owned_appl_sp <span class="sc">/</span> tp</span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a><span class="co"># Share of stocks in the TP when the M-S share is applied to the TP</span></span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a>dt[</span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a>    stocks_owned_appl_tp <span class="sc">:</span><span class="er">=</span> <span class="fu">ifelse</span>(sp <span class="sc">&lt;</span> tp <span class="sc">*</span> sm_share, sp, tp <span class="sc">*</span> sm_share)</span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a>][</span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a>    stocks_share_tp_appl_tp <span class="sc">:</span><span class="er">=</span> stocks_owned_appl_tp <span class="sc">/</span> tp</span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> dt, <span class="at">x =</span> <span class="sc">~</span>age) <span class="sc">|&gt;</span></span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_lines</span>(</span>
<span id="cb7-152"><a href="#cb7-152" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span> stocks_share_tp_appl_sp <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb7-153"><a href="#cb7-153" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Stocks % in Total Portfolio When Merton-Samuelson Share Applied to Savings Portfolio"</span>,</span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a>        <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#1f77b4"</span>)</span>
<span id="cb7-155"><a href="#cb7-155" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb7-156"><a href="#cb7-156" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_lines</span>(</span>
<span id="cb7-157"><a href="#cb7-157" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span> stocks_share_tp_appl_tp <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb7-158"><a href="#cb7-158" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Stocks % in Total Portfolio When Merton-Samuelson Share Applied to Total Portfolio"</span>,</span>
<span id="cb7-159"><a href="#cb7-159" aria-hidden="true" tabindex="-1"></a>        <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#ff7f0e"</span>)</span>
<span id="cb7-160"><a href="#cb7-160" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb7-161"><a href="#cb7-161" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layout</span>(</span>
<span id="cb7-162"><a href="#cb7-162" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">""</span>,</span>
<span id="cb7-163"><a href="#cb7-163" aria-hidden="true" tabindex="-1"></a>        <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Age"</span>),</span>
<span id="cb7-164"><a href="#cb7-164" aria-hidden="true" tabindex="-1"></a>        <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Stocks Share"</span>),</span>
<span id="cb7-165"><a href="#cb7-165" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend =</span> <span class="fu">list</span>(<span class="at">orientation =</span> <span class="st">"h"</span>, <span class="at">x =</span> <span class="fl">0.5</span>, <span class="at">xanchor =</span> <span class="st">"center"</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>),</span>
<span id="cb7-166"><a href="#cb7-166" aria-hidden="true" tabindex="-1"></a>        <span class="at">hovermode =</span> <span class="st">"x"</span></span>
<span id="cb7-167"><a href="#cb7-167" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-168"><a href="#cb7-168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-169"><a href="#cb7-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-170"><a href="#cb7-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-171"><a href="#cb7-171" aria-hidden="true" tabindex="-1"></a><span class="fu"># Temporal diversification {#sec-temp-div}</span></span>
<span id="cb7-172"><a href="#cb7-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-173"><a href="#cb7-173" aria-hidden="true" tabindex="-1"></a>Asset diversification was referred to as "the only free lunch" by Nobel Prize laurerate Harry Markowitz. It basically consists in putting one's eggs in many different baskets. But a similar principle also exists in the time dimension -- it's temporal diversification: capital exposition to the markets over life should be distributed over time, by opposition to being lumped over a period during which a crisis could occur, for instance. What is an "amount of exposition"? It corresponds to the duration multiplied by the amount of an investment, expressed in euro-months (or euro-years, etc.).</span>
<span id="cb7-174"><a href="#cb7-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-175"><a href="#cb7-175" aria-hidden="true" tabindex="-1"></a>@fig-temp-div shows how the total amount of exposition to stocks is distributed over the working life of our person depending on whether the Merton-Samuelson share is applied to their savings or total portfolio. We can see that the latter does a better job at smoothing the exposition over time.</span>
<span id="cb7-178"><a href="#cb7-178" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-179"><a href="#cb7-179" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-temp-div</span></span>
<span id="cb7-180"><a href="#cb7-180" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Exposition to stocks over life"</span></span>
<span id="cb7-181"><a href="#cb7-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-182"><a href="#cb7-182" aria-hidden="true" tabindex="-1"></a><span class="co"># euro-months per 6-year bin</span></span>
<span id="cb7-183"><a href="#cb7-183" aria-hidden="true" tabindex="-1"></a>years_step <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb7-184"><a href="#cb7-184" aria-hidden="true" tabindex="-1"></a>bins <span class="ot">&lt;-</span> <span class="fu">seq</span>(</span>
<span id="cb7-185"><a href="#cb7-185" aria-hidden="true" tabindex="-1"></a>    dt[, <span class="fu">as.integer</span>(<span class="fu">min</span>(age))],</span>
<span id="cb7-186"><a href="#cb7-186" aria-hidden="true" tabindex="-1"></a>    dt[, <span class="fu">as.integer</span>(<span class="fu">max</span>(age))],</span>
<span id="cb7-187"><a href="#cb7-187" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> years_step</span>
<span id="cb7-188"><a href="#cb7-188" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-189"><a href="#cb7-189" aria-hidden="true" tabindex="-1"></a>dt[, age_bin <span class="sc">:</span><span class="er">=</span> <span class="fu">cut</span>(age, <span class="at">breaks =</span> bins, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">FALSE</span>)]</span>
<span id="cb7-190"><a href="#cb7-190" aria-hidden="true" tabindex="-1"></a>temp_div_dt <span class="ot">&lt;-</span> dt[</span>
<span id="cb7-191"><a href="#cb7-191" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb7-192"><a href="#cb7-192" aria-hidden="true" tabindex="-1"></a>    .(</span>
<span id="cb7-193"><a href="#cb7-193" aria-hidden="true" tabindex="-1"></a>        <span class="at">stocks_euro_months_appl_sp =</span> <span class="fu">sum</span>(stocks_owned_appl_sp),</span>
<span id="cb7-194"><a href="#cb7-194" aria-hidden="true" tabindex="-1"></a>        <span class="at">stocks_euro_months_appl_tp =</span> <span class="fu">sum</span>(stocks_owned_appl_tp)</span>
<span id="cb7-195"><a href="#cb7-195" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-196"><a href="#cb7-196" aria-hidden="true" tabindex="-1"></a>    by <span class="ot">=</span> age_bin</span>
<span id="cb7-197"><a href="#cb7-197" aria-hidden="true" tabindex="-1"></a>][</span>
<span id="cb7-198"><a href="#cb7-198" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb7-199"><a href="#cb7-199" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">:=</span><span class="st">`</span>(</span>
<span id="cb7-200"><a href="#cb7-200" aria-hidden="true" tabindex="-1"></a>        <span class="at">share_tot_stocks_euro_months_appl_sp =</span> stocks_euro_months_appl_sp <span class="sc">/</span> <span class="fu">sum</span>(stocks_euro_months_appl_sp),</span>
<span id="cb7-201"><a href="#cb7-201" aria-hidden="true" tabindex="-1"></a>        <span class="at">share_tot_stocks_euro_months_appl_tp =</span> stocks_euro_months_appl_tp <span class="sc">/</span> <span class="fu">sum</span>(stocks_euro_months_appl_tp),</span>
<span id="cb7-202"><a href="#cb7-202" aria-hidden="true" tabindex="-1"></a>        <span class="at">ideal_share_tot_stocks_euro_months =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">length</span>(bins)</span>
<span id="cb7-203"><a href="#cb7-203" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-204"><a href="#cb7-204" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb7-205"><a href="#cb7-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-206"><a href="#cb7-206" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb7-207"><a href="#cb7-207" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> temp_div_dt,</span>
<span id="cb7-208"><a href="#cb7-208" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="sc">~</span>age_bin,</span>
<span id="cb7-209"><a href="#cb7-209" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="sc">~</span> share_tot_stocks_euro_months_appl_sp <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb7-210"><a href="#cb7-210" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"bar"</span>,</span>
<span id="cb7-211"><a href="#cb7-211" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Merton-Samuelson Share Applied to Savings Portfolio"</span>,</span>
<span id="cb7-212"><a href="#cb7-212" aria-hidden="true" tabindex="-1"></a>    <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#1f77b4"</span>)</span>
<span id="cb7-213"><a href="#cb7-213" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb7-214"><a href="#cb7-214" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_trace</span>(</span>
<span id="cb7-215"><a href="#cb7-215" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span> share_tot_stocks_euro_months_appl_tp <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb7-216"><a href="#cb7-216" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Merton-Samuelson Share Applied to Total Portfolio"</span>,</span>
<span id="cb7-217"><a href="#cb7-217" aria-hidden="true" tabindex="-1"></a>        <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#ff7f0e"</span>)</span>
<span id="cb7-218"><a href="#cb7-218" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb7-219"><a href="#cb7-219" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_trace</span>(</span>
<span id="cb7-220"><a href="#cb7-220" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span> ideal_share_tot_stocks_euro_months <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb7-221"><a href="#cb7-221" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">"Perfect Temporal Diversification"</span>,</span>
<span id="cb7-222"><a href="#cb7-222" aria-hidden="true" tabindex="-1"></a>        <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"#2ca02c"</span>)</span>
<span id="cb7-223"><a href="#cb7-223" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb7-224"><a href="#cb7-224" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layout</span>(</span>
<span id="cb7-225"><a href="#cb7-225" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">""</span>,</span>
<span id="cb7-226"><a href="#cb7-226" aria-hidden="true" tabindex="-1"></a>        <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">"Age ("</span>, years_step, <span class="st">"-year bins)"</span>)),</span>
<span id="cb7-227"><a href="#cb7-227" aria-hidden="true" tabindex="-1"></a>        <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Share of Working Life Stocks Euro-months"</span>),</span>
<span id="cb7-228"><a href="#cb7-228" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend =</span> <span class="fu">list</span>(<span class="at">orientation =</span> <span class="st">"h"</span>, <span class="at">x =</span> <span class="fl">0.5</span>, <span class="at">xanchor =</span> <span class="st">"center"</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>),</span>
<span id="cb7-229"><a href="#cb7-229" aria-hidden="true" tabindex="-1"></a>        <span class="at">hovermode =</span> <span class="st">"x"</span></span>
<span id="cb7-230"><a href="#cb7-230" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-231"><a href="#cb7-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-232"><a href="#cb7-232" aria-hidden="true" tabindex="-1"></a>stocks_expo_unsmoothness_appl_sp <span class="ot">&lt;-</span> temp_div_dt[</span>
<span id="cb7-233"><a href="#cb7-233" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb7-234"><a href="#cb7-234" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(<span class="fu">abs</span>(share_tot_stocks_euro_months_appl_sp <span class="sc">-</span> ideal_share_tot_stocks_euro_months))</span>
<span id="cb7-235"><a href="#cb7-235" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb7-236"><a href="#cb7-236" aria-hidden="true" tabindex="-1"></a>stocks_expo_unsmoothness_appl_tp <span class="ot">&lt;-</span> temp_div_dt[</span>
<span id="cb7-237"><a href="#cb7-237" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb7-238"><a href="#cb7-238" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(<span class="fu">abs</span>(share_tot_stocks_euro_months_appl_tp <span class="sc">-</span> ideal_share_tot_stocks_euro_months))</span>
<span id="cb7-239"><a href="#cb7-239" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb7-240"><a href="#cb7-240" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-241"><a href="#cb7-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-242"><a href="#cb7-242" aria-hidden="true" tabindex="-1"></a>This smoothing can be quantified via the absolute difference between the share of stocks exposition and the share of stocks exposition in the theoretical scenario of ideal temporal diversification -- the lower this difference, the better the distribution. In the scenario where the Merton-Samuelson share is applied to the savings portfolio, the total absolute difference equals <span class="in">`r round(stocks_expo_unsmoothness_appl_sp * 100)`</span> percentage points. When it is instead applied to the total portfolio, the total absolute difference equals <span class="in">`r round(stocks_expo_unsmoothness_appl_tp * 100)`</span> percentage points -- that is a <span class="in">`r round(abs(stocks_expo_unsmoothness_appl_tp / stocks_expo_unsmoothness_appl_sp - 1) * 100)`</span>% gain in temporal diversification in our fictional case.</span>
<span id="cb7-243"><a href="#cb7-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-244"><a href="#cb7-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-245"><a href="#cb7-245" aria-hidden="true" tabindex="-1"></a><span class="fu"># Leverage {#sec-lev}</span></span>
<span id="cb7-246"><a href="#cb7-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-247"><a href="#cb7-247" aria-hidden="true" tabindex="-1"></a>We have showed that applying the Merton-Samuelson share to the total portfolio helps in better respecting one's level of risk aversion and in improving the level of temporal diversification. But the plots show that those improvements are far from complete. A possible solution to bridge the gap further is leverage: when one's savings portfolio is too small relative to one's total portfolio to completely apply the Merton-Samuelson share, they can borrow money and invest it in risky assets as part of their now-increased savings portfolio. This allows for a more rapid ramp up of the exposition to stocks in the first section of working life. The share is better respected and more risky assets exposition takes place at this early age hence spreading one's temporal exposition.</span>
<span id="cb7-248"><a href="#cb7-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-249"><a href="#cb7-249" aria-hidden="true" tabindex="-1"></a>On the paper, this is almost a no brainer for people with a low enough risk aversion. But actually implementing leverage is often complicated and/or implies additional risk factors. Those additional factors are:</span>
<span id="cb7-250"><a href="#cb7-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-251"><a href="#cb7-251" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>the cost of borrowing (if high, leveraging is a loosing strategy),</span>
<span id="cb7-252"><a href="#cb7-252" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>and, in the case of leveraged ETFs (LETFs) with daily rebalancing, the volatility of the asset being leveraged -- as it reduces LETFs' price regardless of the price of the underlying asset (we'll come back to this in a future study).</span>
<span id="cb7-253"><a href="#cb7-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-254"><a href="#cb7-254" aria-hidden="true" tabindex="-1"></a>Ayres &amp; Nalebuff (<span class="co">[</span><span class="ot">2010</span><span class="co">](https://www.amazon.com/gp/product/0465018297)</span>) advocated for a x2 leverage maximum. But, since then, borrowing became more expensive and taking a bet on this cost and on a low volatility in the future can be daunting. This lead Ben Mathew to exlude leverage from his TPAW Planner, for instance (cf. the "Leverage and Its Limits" section <span class="co">[</span><span class="ot">here</span><span class="co">](https://tpawplanner.com/learn/future-savings-and-retirement-income)</span>).</span>
<span id="cb7-255"><a href="#cb7-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-256"><a href="#cb7-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-257"><a href="#cb7-257" aria-hidden="true" tabindex="-1"></a><span class="fu"># Appendix</span></span>
<span id="cb7-258"><a href="#cb7-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-259"><a href="#cb7-259" aria-hidden="true" tabindex="-1"></a>This <span class="in">`qmd`</span> took <span class="in">`r round((proc.time() - t0)[3] / 60)`</span> minutes to render. It was rendered in the following environment:</span>
<span id="cb7-262"><a href="#cb7-262" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-263"><a href="#cb7-263" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">sessionInfo</span>(), <span class="at">locale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-264"><a href="#cb7-264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>